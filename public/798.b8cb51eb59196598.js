(self.webpackChunkproductosChain=self.webpackChunkproductosChain||[]).push([[798],{33798:(zt,w,d)=>{"use strict";d.r(w),d.d(w,{PaginasProtegidasModule:()=>Kn});var A={};d.r(A),d.d(A,{Decoder:()=>Rt,Encoder:()=>xn,PacketType:()=>g,protocol:()=>Cn});var f=d(69808),C=d(99291),P=d(68306),a=d(47319),p=d(74728);const J=(0,a.PH)(p.Y.listarProductos),gt=(0,a.PH)(p.Y.listarProductosSuccess,(0,a.Ky)()),mt=(0,a.PH)(p.Y.listarProductosError,(0,a.Ky)()),_t=(0,a.PH)(p.Y.seleccionarProducto,(0,a.Ky)()),$t=(0,a.PH)(p.Y.deseleccionarProducto,(0,a.Ky)()),Q=(0,a.PH)(p.Y.deseleccionarTodosLosProductos),bt=(0,a.PH)(p.Y.eliminarProducto,(0,a.Ky)()),Ht=(0,a.PH)(p.Y.eliminarVariosProductos,(0,a.Ky)()),K=(0,a.PH)(p.Y.eliminarVariosProductosSuccess,(0,a.Ky)()),G=(0,a.PH)(p.Y.eliminarProductoSuccess,(0,a.Ky)()),V=(0,a.PH)(p.Y.eliminarProductoError,(0,a.Ky)()),yt=(0,a.PH)(p.Y.crearProducto),Pt=(0,a.PH)(p.Y.guardarProducto,(0,a.Ky)()),W=(0,a.PH)(p.Y.guardarProductoSuccess,(0,a.Ky)()),vt=(0,a.PH)(p.Y.guardarProductoError,(0,a.Ky)()),Ct=(0,a.PH)(p.Y.editarProducto,(0,a.Ky)()),xt=(0,a.PH)(p.Y.editarProductoSuccess,(0,a.Ky)()),At=(0,a.PH)(p.Y.editarProductoError,(0,a.Ky)()),Tt=(0,a.PH)(p.Y.actualizarProducto,(0,a.Ky)()),X=(0,a.PH)(p.Y.actualizarProductoSuccess,(0,a.Ky)()),wt=(0,a.PH)(p.Y.actualizarProductoError,(0,a.Ky)()),Zt=(0,a.PH)(p.Y.iniciarBusquedaProducto,(0,a.Ky)()),St=(0,a.PH)(p.Y.terminarBusquedaProducto),z=(0,a.PH)(p.Y.limpiarError),Ot=(0,a.PH)(p.Y.asignarError,(0,a.Ky)()),tt=((0,a.G0)({listarProductos:J,listarProductosSuccess:gt,listarProductosError:mt,seleccionarProducto:_t,deseleccionarProducto:$t,deseleccionarTodosProductos:Q,eliminarProducto:bt,eliminarProductoSuccess:G,eliminarVariosProductos:Ht,eliminarVariosProductosSuccess:K,eliminarProductoError:V,crearProducto:yt,guardarProducto:Pt,guardarProductoSuccess:W,guardarProductoError:vt,editarProducto:Ct,editarProductoSuccess:xt,editarProductoError:At,actualizarProducto:Tt,actualizarProductoSuccess:X,actualizarProductoError:wt,iniciarBusquedaProducto:Zt,terminarBusquedaProducto:St,limpiarErrorProducto:z,asignarErrorProducto:Ot}),(0,a.ZF)("productos")),Dt=(0,a.ZF)("auth"),Se=(0,a.P1)(tt,o=>(o.buscando?o.productosBusqueda:o.productos).map(e=>o.productosSeleccionados.includes(e.id)?Object.assign(Object.assign({},e),{seleccionado:!0}):Object.assign(Object.assign({},e),{seleccionado:!1}))),Oe=(0,a.P1)(tt,o=>o.productoSeleccionado),Ee=(0,a.P1)(tt,Dt,(o,n)=>o.loading?null:n.cuenta?o.loaded:null),Me=(0,a.P1)(tt,Dt,(o,n)=>{let e=0;return n.cuenta&&o.productos.map(r=>{const s=n.cuenta||"";r.creadoPor.toLowerCase()===s.toLowerCase()&&e++}),e});var q=d(99772),B=(()=>{return(o=B||(B={}))[o.CREAR=0]="CREAR",o[o.ACTUALIZAR=1]="ACTUALIZAR",o[o.ELIMINAR=2]="ELIMINAR",B;var o})(),t=d(5e3),et=d(4597),ke=d(20773);const Le=function(o){return{"no-loading":o}};let Jt=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cargando"]],inputs:{visible:"visible"},decls:4,vars:3,consts:[[1,"loading"],[1,"fondo-loading",3,"ngClass"],[1,"contenido-loading"],["mode","indeterminate"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"mat-progress-spinner",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(1,Le,!r.visible)))},directives:[f.mk,ke.Ou],styles:[".loading[_ngcontent-%COMP%]{position:fixed;z-index:1000;pointer-events:none;top:0;left:0;height:100%;width:100%}.contenido-loading[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;font-size:25px;font-style:oblique;justify-content:center;align-items:center}.fondo-loading[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:initial;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:1;background:rgba(0,0,0,.32);display:flex}.no-loading[_ngcontent-%COMP%]{opacity:0;pointer-events:none}"]}),o})();var M=d(25245);function Ne(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"mat-icon",2),t._uU(2,"warning"),t.qZA(),t._UZ(3,"div",3),t.TgZ(4,"mat-icon",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().cerrarMsj()}),t._uU(5,"clear"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("innerHTML",e.error,t.oJD)}}let Qt=(()=>{class o{constructor(){this.visible=!1,this.error="",this.onCerrarMensajeError=new t.vpe}ngOnInit(){}cerrarMsj(){this.onCerrarMensajeError.emit(!0)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-msj-error"]],inputs:{visible:"visible",error:"error"},outputs:{onCerrarMensajeError:"onCerrarMensajeError"},decls:1,vars:1,consts:[["class","error-alert",4,"ngIf"],[1,"error-alert"],[1,"error-icono"],[3,"innerHTML"],[1,"cerrar-icono",3,"click"]],template:function(e,r){1&e&&t.YNc(0,Ne,6,1,"div",0),2&e&&t.Q6J("ngIf",r.visible)},directives:[f.O5,M.Hw],styles:[".error-alert[_ngcontent-%COMP%]{text-align:left;display:flex;align-items:center;background-color:#f00c;color:#fff;position:fixed;top:56px;right:0;z-index:1;margin:2.5em 2em 0;border-radius:6px;padding:14px 48px 14px 14px;box-shadow:0 7px 14px #0003;font-size:15px}.cerrar-icono[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:12px;cursor:pointer}.error-icono[_ngcontent-%COMP%]{padding-right:8px}@media (max-width: 767px){.error-alert[_ngcontent-%COMP%]{left:0}}"]}),o})();var Kt=d(69832),ot=d(87238),y=d(93075),k=d(47423);const qe=["inputBuscar"];function Be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().buscarLimpiar()}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA(),t.qZA()}}function je(o,n){if(1&o&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"i18nPlural"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.resultadoCantidad,e.detalleBusqueda),"\n")}}let Ie=(()=>{class o{constructor(){this.resultadoCantidad=0,this.onTerminoBusqueda=new t.vpe,this.buscar=void 0,this.buscando=!1,this.detalleBusqueda={"=0":"No hay coincidencias.","=1":"1 coincidencia.",other:"# coincidencias."}}ngOnInit(){}ngAfterViewInit(){this.inputBuscar.nativeElement.focus()}buscarResultados(){this.buscar&&(this.onTerminoBusqueda.emit(this.buscar),this.buscando=!0)}buscarLimpiar(){this.buscar=void 0,this.buscando=!1}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-producto-buscar"]],viewQuery:function(e,r){if(1&e&&t.Gf(qe,5),2&e){let i;t.iGM(i=t.CRH())&&(r.inputBuscar=i.first)}},inputs:{resultadoCantidad:"resultadoCantidad"},outputs:{onTerminoBusqueda:"onTerminoBusqueda"},decls:8,vars:3,consts:[[1,"prod-buscar2"],[1,"btn-icon-search-buscar2"],["type","search","required","","autofocus","","placeholder","   ",1,"input-buscar2",3,"ngModel","ngModelChange","keydown.enter"],["inputBuscar",""],["mat-icon-button","","class","btn-icon-cancel-buscar2",3,"click",4,"ngIf"],["class","detalle-busqueda",4,"ngIf"],["mat-icon-button","",1,"btn-icon-cancel-buscar2",3,"click"],[1,"detalle-busqueda"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-icon"),t._uU(3,"search"),t.qZA(),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("ngModelChange",function(s){return r.buscar=s})("keydown.enter",function(){return r.buscarResultados()}),t.qZA(),t.YNc(6,Be,3,0,"button",4),t.qZA(),t.YNc(7,je,3,4,"div",5)),2&e&&(t.xp6(4),t.Q6J("ngModel",r.buscar),t.xp6(2),t.Q6J("ngIf",r.buscar),t.xp6(1),t.Q6J("ngIf",r.buscando))},directives:[M.Hw,y.Fj,y.Q7,y.JJ,y.On,f.O5,k.lW],pipes:[f.Gx],styles:[".prod-buscar2[_ngcontent-%COMP%]{border:1px solid black;height:40px;display:flex;flex-flow:row;justify-content:space-around;margin-top:1em;overflow:hidden;background:white;position:relative;border-radius:4px}.detalle-busqueda[_ngcontent-%COMP%]{margin-bottom:1em;text-align:left}.prod-buscar2[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 3px gray inset}.btn-icon-search-buscar2[_ngcontent-%COMP%]{height:initial;box-shadow:none;border-radius:0;width:40px;display:flex;justify-content:center;align-items:center}.input-buscar2[_ngcontent-%COMP%]{height:initial;box-shadow:none;border-radius:0;border:1px solid blue;width:calc(100% - 45px);border:none;margin:5px 0;background:transparent;font-size:20px}.input-buscar2[_ngcontent-%COMP%]:invalid{animation:parpadeo 1.5s step-end infinite;caret-color:transparent;opacity:1;-webkit-text-decoration-color:black;text-decoration-color:#000;text-decoration-thickness:3px;text-underline-offset:2px}.btn-icon-cancel-buscar2[_ngcontent-%COMP%]{height:initial;box-shadow:none;width:40px;position:absolute;right:0}@keyframes parpadeo{0%,to{-webkit-text-decoration-line:none;text-decoration-line:none}50%{-webkit-text-decoration-line:underline;text-decoration-line:underline}}"]}),o})();var v=d(9224),Re=d(92977),Ue=d.n(Re);const Vt="http://www.w3.org/2000/svg",Ye=["#01888C","#FC7500","#034F5D","#F73F01","#FC1960","#C7144C","#F3C100","#1598F2","#2465E1","#F19E02"];let j;function Qe(o,n){j=new(Ue())(n);const e=function ze(o,n){const e=30*n.random()-15;return o.map(i=>function $e(o,n){const e=function De(o){let{r:n,g:e,b:r}=function He(o){return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16)}}(o);n/=255,e/=255,r/=255;const i=Math.min(n,e,r),s=Math.max(n,e,r),c=s-i;let u=0,h=0,l=0;return u=0==c?0:s==n?(e-r)/c%6:s==e?(r-n)/c+2:(n-e)/c+4,u=Math.round(60*u),u<0&&(u+=360),l=(s+i)/2,h=0==c?0:c/(1-Math.abs(2*l-1)),h=+(100*h).toFixed(1),l=+(100*l).toFixed(1),{h:u,s:h,l}}(o);let r=e.h;return r=(r+n)%360,r=r<0?360+r:r,e.h=r,function Je(o){let{h:n,s:e,l:r}=o;e/=100,r/=100;const i=(1-Math.abs(2*r-1))*e,s=i*(1-Math.abs(n/60%2-1)),c=r-i/2;let u=0,h=0,l=0;0<=n&&n<60?(u=i,h=s,l=0):60<=n&&n<120?(u=s,h=i,l=0):120<=n&&n<180?(u=0,h=i,l=s):180<=n&&n<240?(u=0,h=s,l=i):240<=n&&n<300?(u=s,h=0,l=i):300<=n&&n<360&&(u=i,h=0,l=s);let _=Math.round(255*(u+c)).toString(16),E=Math.round(255*(h+c)).toString(16),T=Math.round(255*(l+c)).toString(16);return 1==_.length&&(_="0"+_),1==E.length&&(E="0"+E),1==T.length&&(T="0"+T),"#"+_+E+T}(e)}(i,e))}(Ye.slice(),j),r=function Ge(o,n){const e=document.createElement("div");return e.style.borderRadius="9999px",e.style.overflow="hidden",e.style.padding="0px",e.style.margin="0px",e.style.width=`${o}px`,e.style.height=`${o}px`,e.style.display="inline-block",e.style.background=n,e}(o,Wt(e)),i=document.createElementNS(Vt,"svg");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",String(o)),i.setAttributeNS(null,"height",String(o)),r.appendChild(i);for(var s=0;s<4;s++)Ke(e,o,s,4,i);return r}function Ke(o,n,e,r,i){const s=n/2,c=document.createElementNS(Vt,"rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",String(n)),c.setAttributeNS(null,"height",String(n));const u=j.random(),h=2*Math.PI*u,l=n/r*j.random()+e*n/r,T=`translate(${Math.cos(h)*l} ${Math.sin(h)*l})`,Gn=`rotate(${(360*u+180*j.random()).toFixed(1)} ${s} ${s})`;e!==r-1&&c.setAttributeNS(null,"transform",T+" "+Gn);const Wn=Wt(o);c.setAttributeNS(null,"fill",Wn),e!==r-1?i.appendChild(c):i.insertBefore(c,i.firstChild)}function Wt(o){j.random();const n=Math.floor(o.length*j.random());return o.splice(n,1)[0]}var Xt=d(22313);const Ve=function(o,n,e){return{width:o,height:n,"border-radius":e}};let Et=(()=>{class o{constructor(e){this.sanitizer=e,this.cuenta=void 0,this.size=40,this.sizePx=`${this.size}px`,this.identicon=""}ngOnInit(){if(!this.cuenta)return;const e=Qe(this.size,parseInt(this.cuenta.slice(2,10),16));this.sizePx=`${this.size}px`,e&&(this.identicon=this.sanitizer.bypassSecurityTrustHtml(e.innerHTML))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Xt.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-usuario-icono"]],inputs:{cuenta:"cuenta",size:"size"},decls:1,vars:6,consts:[[1,"icono",3,"innerHTML","ngStyle"]],template:function(e,r){1&e&&t._UZ(0,"div",0),2&e&&t.Q6J("innerHTML",r.identicon,t.oJD)("ngStyle",t.kEZ(2,Ve,r.sizePx,r.sizePx,r.sizePx))},directives:[f.PC],styles:[".icono[_ngcontent-%COMP%]{overflow:hidden}"]}),o})();var Mt=d(4834),te=d(85899),$=d(59346);let kt=(()=>{class o{transform(e){return""===e?"assets/img/default.png":e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"urlimagen",type:o,pure:!0}),o})();function We(o,n){1&o&&(t.TgZ(0,"div",15),t.TgZ(1,"span",16),t._uU(2,"Destacado"),t.qZA(),t.qZA())}function Xe(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().eliminarProducto(i.id)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().editarProducto(i.id)}),t.TgZ(6,"mat-icon"),t._uU(7,"edit"),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("disabled",e.id===r.idProducto),t.xp6(4),t.Q6J("disabled",e.id===r.idProducto)}}function to(o,n){1&o&&t._UZ(0,"div",19)}function eo(o,n){1&o&&t._UZ(0,"mat-progress-bar",20)}const oo=function(o,n){return{"prod-seleccionado":o,"prod-no-seleccionado":n}};function no(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",2),t.TgZ(1,"div",3),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().seleccionarCard(s.id)}),t.YNc(2,We,3,0,"div",4),t.TgZ(3,"mat-card-header"),t.TgZ(4,"div",5),t._UZ(5,"app-usuario-icono",6),t.qZA(),t.TgZ(6,"mat-card-title",7),t._uU(7),t.qZA(),t.TgZ(8,"mat-card-subtitle"),t._uU(9),t.ALo(10,"idformat"),t.qZA(),t.qZA(),t._UZ(11,"mat-divider",8),t._UZ(12,"img",9),t.ALo(13,"urlimagen"),t.TgZ(14,"mat-card-content",10),t.TgZ(15,"p"),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-actions",11),t.YNc(18,Xe,8,2,"ng-container",12),t.YNc(19,to,1,0,"ng-template",null,13,t.W1O),t.qZA(),t.TgZ(21,"mat-card-footer"),t.YNc(22,eo,1,0,"mat-progress-bar",14),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,r=t.MAs(20),i=t.oxw();t.Q6J("ngClass",t.WLB(17,oo,e.seleccionado&&i.productosSeleccionados,!e.seleccionado&&i.productosSeleccionados)),t.xp6(2),t.Q6J("ngIf",e.destacado),t.xp6(3),t.Q6J("cuenta",e.creadoPor)("size",40),t.xp6(1),t.Q6J("matTooltip",e.nombre),t.xp6(1),t.Oqu(e.nombre),t.xp6(2),t.hij("Autor: ",t.lcZ(10,13,e.creadoPor),""),t.xp6(3),t.Q6J("src",t.lcZ(13,15,e.imagen),t.LSH)("alt",e.nombre),t.xp6(4),t.hij(" ",e.descripcion," "),t.xp6(2),t.Q6J("ngIf",!i.productosSeleccionados&&!e.seleccionado)("ngIfElse",r),t.xp6(4),t.Q6J("ngIf",e.id&&e.id===i.idProducto)}}let ro=(()=>{class o{constructor(){this.productos=[],this.productosSeleccionados=!1,this.idProducto=void 0,this.onSeleccionarCard=new t.vpe,this.onEliminarProducto=new t.vpe,this.onEditarProducto=new t.vpe}ngOnInit(){}seleccionarCard(e){this.onSeleccionarCard.emit(e)}eliminarProducto(e){this.onEliminarProducto.emit(e)}editarProducto(e){this.onEditarProducto.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-producto-grid"]],inputs:{productos:"productos",productosSeleccionados:"productosSeleccionados",idProducto:"idProducto"},outputs:{onSeleccionarCard:"onSeleccionarCard",onEliminarProducto:"onEliminarProducto",onEditarProducto:"onEditarProducto"},decls:2,vars:1,consts:[[1,"contenedor-grid"],["class","custom-card-grid shadow-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"custom-card-grid","shadow-card",3,"ngClass"],[1,"area-seleccionable-card",3,"click"],["class","destacado",4,"ngIf"],["mat-card-avatar","",1,"usuario-image"],[3,"cuenta","size"],["matTooltipPosition","below",1,"titulo",3,"matTooltip"],["inset",""],["mat-card-image","",1,"imagen",3,"src","alt"],[1,"descripcion"],[1,"acciones"],[4,"ngIf","ngIfElse"],["noSeleccionado",""],["mode","indeterminate","class","loading",4,"ngIf"],[1,"destacado"],[1,"color-destacado"],["mat-flat-button","","color","warn","matTooltip","Borrar Producto","matTooltipPosition","above",1,"color-btn-cancel",3,"disabled","click"],["mat-flat-button","","color","primary","matTooltip","Editar Producto","matTooltipPosition","above",1,"color-btn-ok",3,"disabled","click"],[1,"espacio-no-seleccionado"],["mode","indeterminate",1,"loading"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,no,23,20,"mat-card",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.productos))},directives:[f.sg,v.a8,f.mk,f.O5,v.dk,v.kc,Et,v.n5,ot.gM,v.$j,Mt.d,v.G2,v.dn,v.hq,k.lW,M.Hw,v.rt,te.pW],pipes:[$.e,kt],styles:[".contenedor-grid[_ngcontent-%COMP%]{margin:1em;overflow-y:scroll;padding-top:1em}.custom-card-grid[_ngcontent-%COMP%]{max-width:300px;display:inline-block!important;margin-bottom:2em;margin-left:1em;margin-right:1em;transition:.2s all ease}.usuario-image[_ngcontent-%COMP%]{box-shadow:0 0 5px gray;overflow:hidden}.imagen[_ngcontent-%COMP%]{height:330px!important;object-fit:fill;object-position:center}.titulo[_ngcontent-%COMP%]{width:240px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.descripcion[_ngcontent-%COMP%]{height:100px;width:300px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-ms-box-orient:vertical;box-orient:vertical;-webkit-line-clamp:5;-moz-line-clamp:5;-ms-line-clamp:5;line-clamp:5}.destacado[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:var(--color-destacado);color:#fff;padding:.3em;position:absolute;right:2%;top:14%}.acciones[_ngcontent-%COMP%]{text-align:right;cursor:initial;margin-bottom:0;cursor:auto}.espacio-no-seleccionado[_ngcontent-%COMP%]{height:36px}.loading[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}"]}),o})();function io(o,n){1&o&&(t.TgZ(0,"div",15),t._uU(1," Destacado "),t.qZA())}function so(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().eliminarProducto(i.id)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t._uU(4," Eliminar "),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().editarProducto(i.id)}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t._uU(9," Editar "),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("disabled",e.id===r.idProducto),t.xp6(5),t.Q6J("disabled",e.id===r.idProducto)}}function co(o,n){1&o&&t._UZ(0,"div",18)}function ao(o,n){1&o&&t._UZ(0,"mat-progress-bar",19)}const lo=function(o,n,e){return{"card-destacado2":o,"prod-seleccionado":n,"prod-no-seleccionado":e}};function uo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",2),t.YNc(1,io,2,0,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().seleccionarCard(s.id)}),t.TgZ(4,"div",6),t._UZ(5,"app-usuario-icono",7),t.qZA(),t.TgZ(6,"mat-card-title-group"),t.TgZ(7,"mat-card-title"),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-subtitle"),t.TgZ(10,"div",8),t.TgZ(11,"mat-icon",9),t._uU(12,"person"),t.qZA(),t._uU(13),t.ALo(14,"idformat"),t._UZ(15,"br"),t.TgZ(16,"mat-icon",9),t._uU(17,"date_range"),t.qZA(),t._uU(18),t.ALo(19,"date"),t.qZA(),t.qZA(),t._UZ(20,"img",10),t.ALo(21,"urlimagen"),t.qZA(),t.TgZ(22,"mat-card-content"),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"mat-card-actions",11),t.YNc(25,so,10,2,"ng-container",12),t.YNc(26,co,1,0,"ng-template",null,13,t.W1O),t.qZA(),t.TgZ(28,"mat-card-footer"),t.YNc(29,ao,1,0,"mat-progress-bar",14),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,r=t.MAs(27),i=t.oxw();t.Q6J("ngClass",t.kEZ(19,lo,e.destacado,e.seleccionado&&i.productosSeleccionados,!e.seleccionado&&i.productosSeleccionados)),t.xp6(1),t.Q6J("ngIf",e.destacado),t.xp6(4),t.Q6J("cuenta",e.creadoPor)("size",40),t.xp6(3),t.Oqu(e.nombre),t.xp6(5),t.hij(" Autor: ",t.lcZ(14,13,e.creadoPor)," "),t.xp6(5),t.hij(" Fecha: ",t.lcZ(19,15,1e3*e.creadoEn)," "),t.xp6(2),t.Q6J("src",t.lcZ(21,17,e.imagen),t.LSH)("alt",e.nombre),t.xp6(3),t.hij(" ",e.descripcion," "),t.xp6(2),t.Q6J("ngIf",!i.productosSeleccionados&&!e.seleccionado)("ngIfElse",r),t.xp6(4),t.Q6J("ngIf",e.id&&e.id===i.idProducto)}}let ho=(()=>{class o{constructor(){this.productos=[],this.productosSeleccionados=!1,this.idProducto=void 0,this.onSeleccionarCard=new t.vpe,this.onEliminarProducto=new t.vpe,this.onEditarProducto=new t.vpe}ngOnInit(){}seleccionarCard(e){this.onSeleccionarCard.emit(e)}eliminarProducto(e){this.onEliminarProducto.emit(e)}editarProducto(e){this.onEditarProducto.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-producto-list"]],inputs:{productos:"productos",productosSeleccionados:"productosSeleccionados",idProducto:"idProducto"},outputs:{onSeleccionarCard:"onSeleccionarCard",onEliminarProducto:"onEliminarProducto",onEditarProducto:"onEditarProducto"},decls:2,vars:1,consts:[[1,"contenedor-list"],["class","custom-card-list shadow-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"custom-card-list","shadow-card",3,"ngClass"],["class","prod-destacado2",4,"ngIf"],[1,"datos"],[1,"area-seleccionable-card",3,"click"],[1,"usuario"],[3,"cuenta","size"],[1,"producto-info"],[1,"align-icon"],["mat-card-md-image","",3,"src","alt"],[1,"acciones"],[4,"ngIf","ngIfElse"],["noSeleccionado",""],["mode","indeterminate","class","loading",4,"ngIf"],[1,"prod-destacado2"],["mat-button","","matTooltip","Borrar Producto","matTooltipPosition","above",3,"disabled","click"],["mat-button","","matTooltip","Editar Producto","matTooltipPosition","above",3,"disabled","click"],[1,"espacio-no-seleccionado"],["mode","indeterminate",1,"loading"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,uo,30,23,"mat-card",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.productos))},directives:[f.sg,v.a8,f.mk,f.O5,Et,v.C1,v.n5,v.$j,M.Hw,v.nc,v.dn,v.hq,k.lW,ot.gM,v.rt,te.pW],pipes:[$.e,f.uU,kt],styles:[".contenedor-list[_ngcontent-%COMP%]{margin:0 2em;overflow-y:scroll;padding-top:1em}.custom-card-list[_ngcontent-%COMP%]{display:inline-block!important;margin-bottom:2em;width:calc(100% - 42px);transition:.2s all ease;position:relative}.datos[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:8px}.prod-nombre[_ngcontent-%COMP%]{position:relative;z-index:1;text-shadow:0px 0px 7px white}.usuario[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;border-radius:20px;overflow:hidden;width:40px;height:40px;box-shadow:0 0 5px gray}.acciones[_ngcontent-%COMP%]{margin-bottom:0;text-align:right;cursor:auto}.producto-info[_ngcontent-%COMP%]{padding-top:8px}.prod-destacado[_ngcontent-%COMP%]{clip-path:polygon(0 0%,0% 100%,100% 100%);background-color:var(--color-destacado-2);width:55px;height:55px;position:absolute;bottom:0;left:0}.texto-destacado[_ngcontent-%COMP%]{transform:rotate(45deg);font-size:11px;padding-bottom:10px;padding-top:25px;color:#fff;font-weight:bolder}.card-destacado2[_ngcontent-%COMP%]{border-left:32px solid var(--color-destacado-2);width:calc(100% - 73px)}.prod-destacado2[_ngcontent-%COMP%]{position:absolute;transform-origin:0 0;transform:translate(-21px) rotate(90deg);letter-spacing:2px;text-transform:uppercase;color:#fff;font-weight:700}.espacio-no-seleccionado[_ngcontent-%COMP%]{height:36px}.loading[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}"]}),o})();function po(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"span",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().cargarProductos()}),t._uU(2,"\xbfIntentar cargar productos de nuevo?"),t.qZA(),t.qZA()}}function fo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-producto-buscar",15),t.NdJ("onTerminoBusqueda",function(i){return t.CHM(e),t.oxw().resultadosBusqueda(i)}),t.ALo(1,"async"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("resultadoCantidad",t.lcZ(1,1,e.estadoProductos$).productosBusqueda.length)}}function go(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"span",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().deseleccionarAllCards()}),t.TgZ(2,"mat-icon",18),t._uU(3,"cancel"),t.qZA(),t.qZA(),t._uU(4),t.ALo(5,"async"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.hij(" Productos seleccionados: ",t.lcZ(5,1,e.estadoProductos$).productosSeleccionados.length," ")}}function mo(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-producto-grid",22),t.NdJ("onSeleccionarCard",function(i){return t.CHM(e),t.oxw(2).seleccionarCard(i)})("onEliminarProducto",function(i){return t.CHM(e),t.oxw(2).eliminarProducto(i)})("onEditarProducto",function(i){return t.CHM(e),t.oxw(2).editarProducto(i)}),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("productos",t.lcZ(2,3,e.productos$))("idProducto",e.idProducto)("productosSeleccionados",t.lcZ(3,5,e.estadoProductos$).productosSeleccionados.length>0)}}function _o(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-producto-list",22),t.NdJ("onSeleccionarCard",function(i){return t.CHM(e),t.oxw(2).seleccionarCard(i)})("onEliminarProducto",function(i){return t.CHM(e),t.oxw(2).eliminarProducto(i)})("onEditarProducto",function(i){return t.CHM(e),t.oxw(2).editarProducto(i)}),t.ALo(1,"async"),t.ALo(2,"async"),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("productos",t.lcZ(1,3,e.productos$))("idProducto",e.idProducto)("productosSeleccionados",t.lcZ(2,5,e.estadoProductos$).productosSeleccionados.length>0)}}function bo(o,n){if(1&o&&(t.ynx(0,19),t.YNc(1,mo,4,7,"ng-container",20),t.YNc(2,_o,3,7,"ng-template",null,21,t.W1O),t.BQk()),2&o){const e=t.MAs(3),r=t.oxw();t.xp6(1),t.Q6J("ngIf",0===r.tipoVista)("ngIfElse",e)}}function yo(o,n){1&o&&(t.TgZ(0,"div",24),t.TgZ(1,"div",25),t._uU(2," Cree en nuevo producto haciendo clic en el boton \xa0 "),t.TgZ(3,"button",26),t.TgZ(4,"mat-icon"),t._uU(5,"add_shopping_cart"),t.qZA(),t.qZA(),t._uU(6," \xa0 ubicado en la parte superior izquerda. "),t.qZA(),t.qZA())}function Po(o,n){if(1&o&&(t.YNc(0,yo,7,0,"div",23),t.ALo(1,"async"),t.ALo(2,"async")),2&o){const e=t.oxw();t.Q6J("ngIf",!t.lcZ(1,1,e.estadoProductos$).loading&&!t.lcZ(2,3,e.estadoProductos$).buscando)}}let vo=(()=>{class o{constructor(e,r){this.store=e,this.dialogoService=r,this.tipoVista=0,this.productos$=new P.y,this.estadoProductos$=new P.y,this.estadoDialogo$=new P.y,this.dialogProcesarSubscription=void 0,this.idProducto=void 0,this.loadedSubscription=void 0,this.mostrarBuscar=!1,this.buscar=void 0,this.nroIntentosCargarProductos=0,this.maxIntentosCargarProductos=1}ngOnInit(){this.loadedSubscription=this.store.select(Ee).subscribe(e=>{!1===e&&this.intentarCargarProductos()}),this.estadoProductos$=this.store.select("productos"),this.estadoDialogo$=this.store.select("dialogo"),this.productos$=this.store.select(Se)}intentarCargarProductos(){this.nroIntentosCargarProductos<this.maxIntentosCargarProductos&&(this.nroIntentosCargarProductos++,this.store.dispatch(J()))}cargarProductos(){this.nroIntentosCargarProductos=0,this.intentarCargarProductos()}seleccionarCard(e){this.store.dispatch(_t({id:e}))}deseleccionarAllCards(){this.store.dispatch(Q())}cambiarVista(e){this.tipoVista=e,this.retirarError()}editarProducto(e){void 0!==e&&this.store.dispatch(Ct({id:e}))}eliminarProducto(e){void 0!==e&&(this.idProducto=e,this.dialogProcesarSubscription&&this.dialogProcesarSubscription.unsubscribe(),this.store.dispatch((0,q.ph)({tipo:B.ELIMINAR,producto:null,id:e,data:{redirigir:!1,url:null,variosProductos:!1}})),this.dialogoService.getDialogo&&(this.dialogProcesarSubscription=this.dialogoService.getDialogo().componentInstance.onProceder.subscribe(i=>{!0===i.proceder&&this.store.dispatch(bt({id:e,gasLimit:i.gasLimit,gasPrice:i.gasPrice})),!1===i.proceder&&(this.idProducto=void 0,this.retirarError())})))}retirarError(){this.store.dispatch(z())}resultadosBusqueda(e){this.store.dispatch(Zt({buscar:e}))}buscarToogle(){this.mostrarBuscar=!this.mostrarBuscar,this.mostrarBuscar||this.terminarBusqueda()}terminarBusqueda(){this.store.dispatch(St())}ngOnDestroy(){this.nroIntentosCargarProductos=0,this.dialogProcesarSubscription&&this.dialogProcesarSubscription.unsubscribe(),this.loadedSubscription&&this.loadedSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.yh),t.Y36(et.w))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-productos"]],decls:29,vars:26,consts:[[3,"visible"],[3,"visible","error","onCerrarMensajeError"],[1,"opciones-productos"],["multiple","",1,"btn-buscar",3,"click"],["matTooltip","Mostrar/Ocultar busqueda"],["value","grid",1,"btn-tipo-vista"],["value","grid","matTooltip","Ver en grilla",3,"click"],["value","list","matTooltip","Ver en lista",3,"click"],["class","productos-no-cargados",4,"ngIf"],[3,"resultadoCantidad","onTerminoBusqueda",4,"ngIf"],["class","productos-seleccionados",4,"ngIf"],["class","container-productos",4,"ngIf","ngIfElse"],["sinProductos",""],[1,"productos-no-cargados"],[1,"btn-intentar-cargar-productos",3,"click"],[3,"resultadoCantidad","onTerminoBusqueda"],[1,"productos-seleccionados"],["matTooltip","Deseleccionar todos los productos (Esc)",1,"deseleccionar-productos","color-btn-icon",3,"click"],[1,"align-icon"],[1,"container-productos"],[4,"ngIf","ngIfElse"],["vistaFilas",""],[3,"productos","idProducto","productosSeleccionados","onSeleccionarCard","onEliminarProducto","onEditarProducto"],["class","sin-productos",4,"ngIf"],[1,"sin-productos"],[1,"mensaje"],["mat-raised-button","",1,"color-btn-accion"]],template:function(e,r){if(1&e&&(t._UZ(0,"app-cargando",0),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"app-msj-error",1),t.NdJ("onCerrarMensajeError",function(){return r.retirarError()}),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"mat-button-toggle-group",3),t.NdJ("click",function(){return r.buscarToogle()}),t.TgZ(9,"mat-button-toggle",4),t.TgZ(10,"mat-icon"),t._uU(11,"search"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"mat-button-toggle-group",5),t.TgZ(13,"mat-button-toggle",6),t.NdJ("click",function(){return r.cambiarVista(0)}),t.TgZ(14,"mat-icon"),t._uU(15,"grid_on"),t.qZA(),t.qZA(),t.TgZ(16,"mat-button-toggle",7),t.NdJ("click",function(){return r.cambiarVista(1)}),t.TgZ(17,"mat-icon"),t._uU(18,"list"),t.qZA(),t.qZA(),t.qZA(),t.YNc(19,po,3,0,"div",8),t.ALo(20,"async"),t.ALo(21,"async"),t.YNc(22,fo,2,3,"app-producto-buscar",9),t.YNc(23,go,6,3,"div",10),t.ALo(24,"async"),t.qZA(),t.YNc(25,bo,4,2,"ng-container",11),t.ALo(26,"async"),t.YNc(27,Po,3,5,"ng-template",null,12,t.W1O)),2&e){const i=t.MAs(28);t.Q6J("visible",t.lcZ(1,8,r.estadoProductos$).loading&&!t.lcZ(2,10,r.estadoDialogo$).dialogoAbierto),t.xp6(3),t.Q6J("visible",t.lcZ(4,12,r.estadoProductos$).error&&!t.lcZ(5,14,r.estadoDialogo$).dialogoAbierto)("error",t.lcZ(6,16,r.estadoProductos$).error),t.xp6(16),t.Q6J("ngIf",!t.lcZ(20,18,r.estadoProductos$).loaded&&!t.lcZ(21,20,r.estadoProductos$).loading),t.xp6(3),t.Q6J("ngIf",r.mostrarBuscar),t.xp6(1),t.Q6J("ngIf",t.lcZ(24,22,r.estadoProductos$).productosSeleccionados.length>0),t.xp6(2),t.Q6J("ngIf",t.lcZ(26,24,r.productos$).length>0)("ngIfElse",i)}},directives:[Jt,Qt,Kt.A9,Kt.Yi,ot.gM,M.Hw,f.O5,Ie,ro,ho,k.lW],pipes:[f.Ov],styles:[".opciones-productos[_ngcontent-%COMP%]{margin:calc(1em + 64px) 2em 1em 2em;text-align:right;position:relative}.container-productos[_ngcontent-%COMP%]{width:100%;height:calc(100% - 32px)}.productos-seleccionados[_ngcontent-%COMP%]{display:block;text-align:center;font-size:18px;padding-top:.3em}.deseleccionar-productos[_ngcontent-%COMP%]{color:#3f51b5;cursor:pointer}.btn-buscar[_ngcontent-%COMP%]{border-right-width:0px;border-radius:4px 0 0 4px}.btn-tipo-vista[_ngcontent-%COMP%]{border-radius:0 4px 4px 0}.productos-no-cargados[_ngcontent-%COMP%]{color:var(--color-destacado);padding:5px 0}.btn-intentar-cargar-productos[_ngcontent-%COMP%]{cursor:pointer;font-weight:700}.btn-intentar-cargar-productos[_ngcontent-%COMP%]:hover{text-decoration:underline}.sin-productos[_ngcontent-%COMP%]{display:table;width:100%;height:calc(100% - 32px)}.mensaje[_ngcontent-%COMP%]{display:table-cell;text-align:center;vertical-align:middle;padding:0 50px;font-style:oblique;font-size:19px;font-weight:lighter;pointer-events:none}"]}),o})();var ee=d(15861);const Co=["myCanvas"];let xo=(()=>{class o{constructor(){this.width=400,this.height=400,this.diametro=400,this.radio=this.diametro/2,this.centroX=this.width/2,this.centroY=this.height/2,this.colorBase="#F8F1F1",this.colorBorde="#2c5871",this.colorSombra="#bfcfd6",this.colorCirculo="#e6f1ff",this.colorLetras="#2c5871",this.colorManecillaAzul="#66c1ff",this.colorManecillaRoja="#ff4c4c",this.colorCirculoManecillas="#555a66",this.colorDetalleBrujula1="#2c5871",this.colorDetalleBrujula2="#bfcfd6",this.anguloMouse=234}ngOnInit(){}ngAfterViewInit(){this.ctx=this.myCanvas.nativeElement.getContext("2d"),this.initGraficas()}initGraficas(){!this.ctx||(this.limpiarCanvas(this.ctx),this.dibujarCirculo(this.ctx),this.sombra(this.ctx),this.dibujarBorde(this.ctx),this.dibujarPuntosCardinales(this.ctx),this.dibujarDetallesBrujula(this.ctx),this.dibujarManecillas(this.ctx))}limpiarCanvas(e){e.clearRect(0,0,this.width,this.height)}dibujarForma(e,r,i,s,c){e.beginPath(),e.save(),e.translate(this.centroX,this.centroY),e.fillStyle=c,e.strokeStyle=c,e.moveTo(0,0-r);for(let u=0;u<s;u++)e.rotate(Math.PI/s),e.lineTo(0,0-r*i),e.rotate(Math.PI/s),e.lineTo(0,0-r);e.stroke(),e.fill(),e.restore(),e.closePath()}dibujarDetallesBrujula(e){this.dibujarForma(e,100,.35,8,this.colorDetalleBrujula1),this.dibujarForma(e,100,.35,4,this.colorDetalleBrujula2)}sombra(e){e.beginPath(),e.arc(this.centroX,this.centroY,182,1.5*Math.PI,.5*Math.PI),e.bezierCurveTo(400,380,400,20,200,20),e.fillStyle=this.colorSombra,e.fill(),e.closePath()}dibujarBorde(e){e.fillStyle=this.colorBorde,e.strokeStyle=this.colorBorde;const r=this.radio-20;e.beginPath();for(let i=this.radio;i>r;i--)e.arc(this.centroX,this.centroY,i,0,2*Math.PI),e.stroke();e.closePath()}dibujarCirculo(e){e.fillStyle=this.colorCirculo,e.strokeStyle=this.colorCirculo,e.beginPath(),e.arc(this.centroX,this.centroY,this.radio-1,0,2*Math.PI),e.fill(),e.closePath()}puntosCardinales(e,r,i,s){e.font=`${s?"bold":""} ${i}px Ubuntu`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.colorLetras,e.strokeStyle=this.colorLetras,e.beginPath();const u=r,h=u.length;for(let l=0;l<h;l++)e.fillText(u[l],this.radio+.75*this.radio*Math.sin(2*l*Math.PI/h),this.radio-.75*this.radio*Math.cos(2*l*Math.PI/h));e.closePath()}dibujarPuntosCardinales(e){this.puntosCardinales(e,["N","E","S","O"],50,!0),this.puntosCardinales(e,["","NE","","SE","","SO","","NO"],15,!0)}moverManecillas(e){const r=this.myCanvas.nativeElement.getBoundingClientRect(),c=(e.clientX-r.left)/(r.right-r.left)*this.width-this.centroX,u=(e.clientY-r.top)/(r.bottom-r.top)*this.height-this.centroY;let l=Math.atan(Math.abs(c<0&&u<0||c>0&&u>0?u/c:c/u))*(180/Math.PI);c>0&&u>0&&(l=270+l),c>=0&&u<=0&&(l=180+l),c<0&&u<0&&(l=90+l),c<0&&u>0&&(l=0+l),this.anguloMouse=l,this.initGraficas()}dibujarManecillas(e){let r=this.anguloMouse;r>359&&(r%=360),r<1&&(r=360),e.beginPath(),e.save(),e.translate(this.centroX,this.centroY),e.rotate(r*Math.PI/180),e.fillStyle=this.colorManecillaAzul,e.strokeStyle=this.colorManecillaAzul,e.moveTo(-20,0),e.lineTo(-2,120),e.lineTo(2,120),e.lineTo(20,0),e.fill(),e.beginPath(),e.fillStyle=this.colorManecillaRoja,e.strokeStyle=this.colorManecillaRoja,e.moveTo(-20,0),e.lineTo(-2,-120),e.lineTo(2,-120),e.lineTo(20,0),e.fill(),e.beginPath(),e.fillStyle=this.colorCirculoManecillas,e.strokeStyle=this.colorCirculoManecillas,e.arc(0,0,21,0,2*Math.PI,!0),e.fill(),e.setTransform(1,0,0,1,0,0),e.restore(),e.closePath()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-brujula"]],viewQuery:function(e,r){if(1&e&&t.Gf(Co,5),2&e){let i;t.iGM(i=t.CRH())&&(r.myCanvas=i.first)}},hostBindings:function(e,r){1&e&&t.NdJ("mousemove",function(s){return r.moverManecillas(s)},!1,t.Jf7)},decls:6,vars:2,consts:[[1,"brujula-contenedor"],[1,"lienzo",3,"width","height"],["myCanvas",""],["href","https://www.mozilla.org/en-US/firefox/new/","target","_blank"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"canvas",1,2),t._uU(3," Tu navegador no soporta canvas. Consigue un navegador "),t.TgZ(4,"a",3),t._uU(5,"aqu\xed"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("width",r.width)("height",r.height))},styles:[""]}),o})(),Ao=(()=>{class o{constructor(e){this.router=e}ngOnInit(){}volver(){var e=this;return(0,ee.Z)(function*(){yield e.router.navigate(["/wallet/productos"],{replaceUrl:!0}),window.location.reload()})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pagina404"]],decls:14,vars:0,consts:[[1,"contenedor"],[1,"contenido"],[1,"titulo"],[1,"brujula"],[1,"mensaje"],[1,"cita"],[1,"autor"],[1,"volver"],[3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h1",2),t._uU(3," P\xe1gina no encontrada "),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-brujula"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"cite",5),t._uU(8,' "Si sabes lo que est\xe1s buscando, lo encontrar\xe1s" '),t.qZA(),t.TgZ(9,"address",6),t._uU(10," - Lailah Gifty Akita - "),t.qZA(),t.qZA(),t.TgZ(11,"div",7),t.TgZ(12,"span",8),t.NdJ("click",function(){return r.volver()}),t._uU(13," Regresar a un lugar conocido "),t.qZA(),t.qZA(),t.qZA(),t.qZA())},directives:[xo],styles:[".contenedor[_ngcontent-%COMP%]{text-align:center;width:100%;height:100%;display:table}.contenido[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.titulo[_ngcontent-%COMP%]{display:block;margin:1.5em 0;font-size:2em}.mensaje[_ngcontent-%COMP%]{text-align:center;width:400px;margin:1.5em auto 0}.mensaje[_ngcontent-%COMP%]   .cita[_ngcontent-%COMP%]{display:block;font-size:1.25em}.mensaje[_ngcontent-%COMP%]   .autor[_ngcontent-%COMP%]{margin-top:8px;display:block;font-weight:700;font-size:15px}.volver[_ngcontent-%COMP%]{margin-top:2em;text-transform:uppercase;font-weight:lighter;margin-bottom:1.5em;cursor:pointer}.volver[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .volver[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:none;color:#000}.volver[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .volver[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),o})();var To=d(32368);const wo=["imagenProducto"],Zo=["inputImagen"],So=function(o){return{"form-error":o}},Oo=function(o){return{"limite-error":o}},Eo=function(o,n){return{"limite-error":o,"form-error":n}},Mo=function(){return["/wallet/productos"]};let ko=(()=>{class o{constructor(e,r,i,s){this.fb=e,this.store=r,this.dialogoService=i,this.sanitizer=s,this.producto={id:"",nombre:"",imagen:"",descripcion:"",destacado:!1,creadoPor:"",creadoEn:0},this.extPermitidos=["jpg","jpeg","png","gif"],this.extFile="jpg",this.maxLenDescripcion=200,this.errorSizeDescripcion=!1,this.maxLenNombre=100,this.maxSizeFile=600,this.sizeFile=0,this.formulario=this.fb.group({nombre:["",[y.kI.required,y.kI.maxLength(this.maxLenNombre)]],destacado:[!1],descripcion:["",[y.kI.required,y.kI.maxLength(this.maxLenDescripcion)]],imagen:[""]}),this.estadoProductos$=new P.y,this.estadoAuth$=new P.y,this.estadoDialogo$=new P.y}ngOnInit(){this.estadoProductos$=this.store.select("productos"),this.estadoAuth$=this.store.select("auth"),this.estadoDialogo$=this.store.select("dialogo"),this.estadoProductos=this.store.select(Oe).subscribe(e=>{null!==e&&(this.producto=e,this.formulario.patchValue(this.producto))})}campoEsValido(e){return this.formulario.controls[e].errors&&this.formulario.controls[e].touched}obtenerErrores(){const e=this.formulario.controls,r={};return Object.keys(e).map(i=>{const s=e[i].errors;s&&(r[i]={error:s})}),r}formularioIncorrecto(){const e=this.obtenerErrores(),r=Object.keys(e);let i="";if(this.extPermitidos.includes(this.extFile)||(i+=`<div>Tipo de archivo no permitido, solo se permite: ${this.extPermitidos.join(", ")}.</div>`),this.sizeFile>this.maxSizeFile&&(i+=`<div>El tama\xf1o m\xe1ximo permitido para la imagen es de ${this.maxSizeFile} Kb.</div>`),r.includes("descripcion")&&(i+=`<div>La descripci\xf3n es requerida y debe tener m\xe1ximo ${this.maxLenDescripcion} caracteres.</div>`),r.includes("nombre")&&(i+=`<div>El nombre es requerido y debe tener m\xe1ximo ${this.maxLenNombre} caracteres.</div>`),i){const s=this.sanitizer.bypassSecurityTrustHtml(i);this.store.dispatch(Ot({error:s}))}return!!i}enviarFormulario(e){if(e.preventDefault(),this.retirarError(),this.formularioIncorrecto())return;const r=Object.assign({},this.formulario.value),i=""===this.producto.id?null:this.producto.id,s=""===this.producto.id?B.CREAR:B.ACTUALIZAR;this.dialogProceserSubscription&&this.dialogProceserSubscription.unsubscribe(),this.store.dispatch((0,q.ph)({tipo:s,producto:r,id:i,data:{redirigir:!0,url:"wallet/productos",variosProductos:!1}})),this.dialogProceserSubscription=this.dialogoService.getDialogo().componentInstance.onProceder.subscribe(u=>{!0===u.proceder&&this.store.dispatch(null!==i?Tt({producto:r,imagen:this.file,id:i,gasLimit:u.gasLimit,gasPrice:u.gasPrice}):Pt({producto:r,imagen:this.file,gasLimit:u.gasLimit,gasPrice:u.gasPrice})),!1===u.proceder&&this.retirarError()})}cambiarImagen(e){if(e.target.files.length>0){const r=e.target.files[0];if(!r)return;const[,i]=r.type.split("/");if(this.extFile=i,this.sizeFile=Math.round(r.size/1024),this.formularioIncorrecto())return this.sizeFile=0,void(this.extFile="jpg");this.file=r;const s=new FileReader;s.onloadend=c=>{this.imagenProducto.nativeElement.src=s.result},s.readAsDataURL(this.file)}}retirarError(){this.store.dispatch(z())}verificarLimite(){this.errorSizeDescripcion=this.formulario.value.descripcion>this.maxLenDescripcion}cancelar(){this.retirarError()}ngOnDestroy(){this.estadoProductos.unsubscribe(),this.dialogProceserSubscription&&this.dialogProceserSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.qu),t.Y36(a.yh),t.Y36(et.w),t.Y36(Xt.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-crear-producto"]],viewQuery:function(e,r){if(1&e&&(t.Gf(wo,5),t.Gf(Zo,5)),2&e){let i;t.iGM(i=t.CRH())&&(r.imagenProducto=i.first),t.iGM(i=t.CRH())&&(r.inputImagen=i.first)}},decls:84,vars:46,consts:[[3,"visible"],[3,"visible","error","onCerrarMensajeError"],[1,"container-fluid","mi-container"],[1,"row"],[1,"col-xs-12","col-sm-3","col-md-3","col-lg-3","col-img"],[1,"container-img","col-xs-12"],[1,"imagen"],["alt","Imagen del producto",3,"src"],["imagenProducto",""],[1,"col-xs-12","col-sm-3","col-md-3","col-lg-3","advertencia"],[1,"col-xs-12","col-sm-9","col-md-9","col-lg-9"],[1,"detalles"],[3,"formGroup","ngSubmit"],[1,"row","mb-2"],[1,"col-xs-12"],[1,"datos-producto"],["type","text","name","nombre","formControlName","nombre","placeholder","Nombre del producto","maxlength","maxLenNombre",1,"nombre-producto",3,"ngClass"],[1,"row","detalles-autor","middle-xs","mt-2","mb-2"],[1,"col-xs-12","col-sm-8"],[1,"autor-detalle"],[1,"align-icon"],[1,"color-grey"],[1,"col-xs-12","col-sm-4"],[1,"row","mt-2","mb-2"],[1,"col-xs-12","mb-1"],[1,"texto-descripcion"],[1,"limite-descripcion"],[3,"ngClass"],["rows","7","placeholder","Descripci\xf3n del producto","name","descripcion","formControlName","descripcion",1,"descripcion-producto",3,"ngClass","change"],[1,"row","mt-1","mb-1"],["name","destacado","formControlName","destacado","color","primary"],[1,"row","imagen-producto","mt-1","mb-1"],[1,"pl-0"],["mat-raised-button","","type","file","name","imagen",1,"d-none",3,"change"],["inputImagen",""],["type","button","mat-button","",1,"btn-file",3,"click"],[1,"extensiones-permitidas"],[1,"row","acciones-producto","mt-1"],[1,"col-xs-12","col-sm-3","col-md-2","mb-1"],["mat-raised-button","","color","warn",1,"btn-block","color-btn-cancel","mt-1",3,"routerLink","click"],[1,"col-xs-12","col-sm-3","col-md-3"],["type","submit","mat-raised-button","","color","primary",1,"btn-block","mt-1","color-btn-ok",3,"disabled"]],template:function(e,r){if(1&e){const i=t.EpF();t._UZ(0,"app-cargando",0),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"app-msj-error",1),t.NdJ("onCerrarMensajeError",function(){return r.retirarError()}),t.ALo(4,"async"),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"div",3),t.TgZ(9,"div",4),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t._UZ(12,"img",7,8),t.ALo(14,"urlimagen"),t.qZA(),t.TgZ(15,"div",9),t._uU(16," * La informaci\xf3n del producto (texto e imagen) podria ser borrada. Esta aplicaci\xf3n es solo de prueba. "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"form",12),t.NdJ("ngSubmit",function(c){return r.enviarFormulario(c)}),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"div",15),t._UZ(23,"input",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",17),t.TgZ(25,"div",18),t.TgZ(26,"div",19),t.TgZ(27,"mat-icon",20),t._uU(28,"person"),t.qZA(),t._uU(29," Autor: "),t.TgZ(30,"span",21),t._uU(31),t.ALo(32,"idformat"),t.ALo(33,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",22),t.TgZ(35,"div",19),t.TgZ(36,"mat-icon",20),t._uU(37,"date_range"),t.qZA(),t._uU(38," Creado el: "),t.TgZ(39,"span",21),t._uU(40),t.ALo(41,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"mat-divider"),t.TgZ(43,"div",23),t.TgZ(44,"div",24),t.TgZ(45,"div",25),t._uU(46," Descripci\xf3n: "),t.TgZ(47,"span",26),t._uU(48," ("),t.TgZ(49,"span",27),t._uU(50),t.qZA(),t._uU(51),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",14),t.TgZ(53,"textarea",28),t.NdJ("change",function(){return r.verificarLimite()}),t._uU(54,"\t\t\t\t\t\t\t\t"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",29),t.TgZ(56,"mat-slide-toggle",30),t._uU(57," Destacado "),t.qZA(),t.qZA(),t.TgZ(58,"div",31),t.TgZ(59,"div",14),t.TgZ(60,"div",32),t.TgZ(61,"input",33,34),t.NdJ("change",function(c){return r.cambiarImagen(c)}),t.qZA(),t.TgZ(63,"button",35),t.NdJ("click",function(){return t.CHM(i),t.MAs(62).click()}),t.TgZ(64,"mat-icon"),t._uU(65,"add_photo_alternate"),t.qZA(),t._uU(66),t.qZA(),t.TgZ(67,"div",36),t._uU(68," Extensiones: "),t.TgZ(69,"span"),t._uU(70,"jpg, jpeg, png, gif"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(71,"div",37),t.TgZ(72,"div",38),t.TgZ(73,"a",39),t.NdJ("click",function(){return r.cancelar()}),t.TgZ(74,"mat-icon"),t._uU(75,"cancel"),t.qZA(),t._uU(76," Cancelar "),t.qZA(),t.qZA(),t.TgZ(77,"div",40),t.TgZ(78,"button",41),t.ALo(79,"async"),t.ALo(80,"async"),t.TgZ(81,"mat-icon"),t._uU(82,"save"),t.qZA(),t._uU(83),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.Q6J("visible",t.lcZ(1,16,r.estadoProductos$).loading&&!t.lcZ(2,18,r.estadoDialogo$).dialogoAbierto),t.xp6(3),t.Q6J("visible",t.lcZ(4,20,r.estadoProductos$).error&&!t.lcZ(5,22,r.estadoDialogo$).dialogoAbierto)("error",t.lcZ(6,24,r.estadoProductos$).error),t.xp6(9),t.Q6J("src",t.lcZ(14,26,r.producto.imagen),t.LSH),t.xp6(7),t.Q6J("formGroup",r.formulario),t.xp6(4),t.Q6J("ngClass",t.VKq(38,So,r.campoEsValido("nombre"))),t.xp6(8),t.Oqu(t.lcZ(32,28,t.lcZ(33,30,r.estadoAuth$).cuenta)),t.xp6(9),t.Oqu(0===r.producto.creadoEn?"En este momento":t.lcZ(41,32,1e3*r.producto.creadoEn)),t.xp6(9),t.Q6J("ngClass",t.VKq(40,Oo,r.formulario.value.descripcion.length>r.maxLenDescripcion)),t.xp6(1),t.Oqu(r.formulario.value.descripcion.length),t.xp6(1),t.hij("/",r.maxLenDescripcion,") "),t.xp6(2),t.Q6J("ngClass",t.WLB(42,Eo,r.formulario.value.descripcion.length>r.maxLenDescripcion,r.campoEsValido("descripcion"))),t.xp6(13),t.hij(" Cargar imagen (Max. ",r.maxSizeFile," Kb.)"),t.xp6(7),t.Q6J("routerLink",t.DdM(45,Mo)),t.xp6(5),t.Q6J("disabled",t.lcZ(79,34,r.estadoDialogo$).loading||t.lcZ(80,36,r.estadoDialogo$).dialogoAbierto),t.xp6(5),t.hij(" ",""===r.producto.id?"Guardar":"Actualizar"," "))},directives:[Jt,Qt,y._Y,y.JL,y.sg,y.Fj,y.JJ,y.u,y.nD,f.mk,M.Hw,Mt.d,To.Rr,k.lW,k.zs,C.yS],pipes:[f.Ov,kt,$.e,f.uU],styles:[".mi-container[_ngcontent-%COMP%]{margin:calc(1em + 64px) 1em 1em;padding:0 .5em}.container-img[_ngcontent-%COMP%]{padding:0 1em}.col-img[_ngcontent-%COMP%]{padding:0}.imagen[_ngcontent-%COMP%]{padding:.5em}.advertencia[_ngcontent-%COMP%]{color:red;display:block;font-size:16px;font-style:italic;max-width:100%;padding:0 8px;text-align:justify;width:100%;word-break:break-word}.detalles[_ngcontent-%COMP%]{padding:.5em}.mt-1[_ngcontent-%COMP%]{margin-top:.5em!important}.mb-1[_ngcontent-%COMP%]{margin-bottom:.5em!important}.mt-2[_ngcontent-%COMP%]{margin-top:1em!important}.mb-2[_ngcontent-%COMP%]{margin-bottom:1em!important}.pl-0[_ngcontent-%COMP%]{padding-left:0}.d-none[_ngcontent-%COMP%]{display:none}.btn-file[_ngcontent-%COMP%]{padding:8px 8px 8px 0;font-weight:400}.extensiones-permitidas[_ngcontent-%COMP%]{font-style:italic;font-size:12px}.extensiones-permitidas[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.color-grey[_ngcontent-%COMP%]{color:gray}.nombre-producto[_ngcontent-%COMP%], .descripcion-producto[_ngcontent-%COMP%]{border:1px solid transparent;width:100%;font-size:1.8em;font-weight:400;color:#000;background-color:transparent;display:block}.nombre-producto[_ngcontent-%COMP%]::placeholder{color:#000;opacity:.3}.texto-descripcion[_ngcontent-%COMP%]{color:#000;font-size:20px}.limite-descripcion[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder;display:inline-block}.limite-error[_ngcontent-%COMP%]{color:red!important}.descripcion-producto[_ngcontent-%COMP%]{font-size:16px;resize:none;color:gray;text-align:justify;scrollbar-color:var(--color-toolbar) var(--color-background)}.imagen[_ngcontent-%COMP%]{overflow:hidden;text-align:center}.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;box-shadow:1px 1px 3px gray}.btn-block[_ngcontent-%COMP%]{width:100%!important}.form-error[_ngcontent-%COMP%]{text-decoration:underline;-webkit-text-decoration-color:red;text-decoration-color:red;text-underline-offset:5px}textarea.form-error[_ngcontent-%COMP%]{text-decoration-thickness:1px}input.form-error[_ngcontent-%COMP%]{text-decoration-thickness:7px}"]}),o})();var nt=d(89810),Lt=d(57261),rt=d(92340),Lo=d(90508),No=d(95099);function qo(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"a",5),t._uU(2),t.ALo(3,"idformat"),t.qZA(),t.BQk()),2&o){const e=n.$implicit,r=t.oxw();t.xp6(1),t.hYB("href","",r.urlTransaccion,"/",e,"",t.LSH),t.xp6(1),t.hij(" ",t.lcZ(3,3,e)," ")}}let Bo=(()=>{class o{constructor(e,r){this.data=e,this.snackBar=r,this.cantidadTx=0,this.textoTx={"=0":"Transacciones","=1":"Transacci\xf3n",other:"Transacciones"},this.textoRealizada={"=0":"realizadas","=1":"realizada",other:"realizadas"},this.urlTransaccion=rt.N.TRANSACCION}ngOnInit(){this.cantidadTx=this.data.tx.split(",").length}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Lt.qD),t.Y36(Lt.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-notificacion-socket"]],decls:12,vars:12,consts:[[1,"info-alert"],[1,"info-icono"],[1,"info-mensaje"],[4,"ngFor","ngForOf"],["matRipple","",1,"cerrar-icono",3,"click"],["target","_blank",3,"href"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-icon",1),t._uU(2,"notifications"),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"i18nPlural"),t.YNc(6,qo,4,5,"ng-container",3),t.ALo(7,"tx2Array"),t._uU(8),t.ALo(9,"i18nPlural"),t.qZA(),t.TgZ(10,"mat-icon",4),t.NdJ("click",function(){return r.snackBar.dismiss()}),t._uU(11,"clear"),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.xi3(5,4,r.cantidadTx,r.textoTx)," "),t.xp6(2),t.Q6J("ngForOf",t.lcZ(7,7,r.data.tx)),t.xp6(2),t.AsE(" ",t.xi3(9,9,r.cantidadTx,r.textoRealizada)," (",r.data.tipoAccion,") "))},directives:[M.Hw,f.sg,Lo.wG],pipes:[f.Gx,No.p,$.e],styles:[".info-alert[_ngcontent-%COMP%]{color:#fff;padding-right:16px;display:flex;align-items:center}.info-icono[_ngcontent-%COMP%]{padding-right:8px}.info-mensaje[_ngcontent-%COMP%]{font-size:16px;padding-right:12px}.info-mensaje[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}.info-mensaje[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:underline}.cerrar-icono[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:12px;cursor:pointer;z-index:7}@media (max-width: 1254px){.info-mensaje[_ngcontent-%COMP%]{padding-right:0}}"]}),o})();const S=Object.create(null);S.open="0",S.close="1",S.ping="2",S.pong="3",S.message="4",S.upgrade="5",S.noop="6";const it=Object.create(null);Object.keys(S).forEach(o=>{it[S[o]]=o});const jo={type:"error",data:"parser error"},Io="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ro="function"==typeof ArrayBuffer,oe=(o,n)=>{const e=new FileReader;return e.onload=function(){const r=e.result.split(",")[1];n("b"+r)},e.readAsDataURL(o)},ne=({type:o,data:n},e,r)=>Io&&n instanceof Blob?e?r(n):oe(n,r):Ro&&(n instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer)(n))?e?r(n):oe(new Blob([n]),r):r(S[o]+(n||"")),F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let o=0;o<F.length;o++)H[F.charCodeAt(o)]=o;const zo="function"==typeof ArrayBuffer,Ho=(o,n)=>{if(zo){const e=(o=>{let r,s,c,u,h,n=.75*o.length,e=o.length,i=0;"="===o[o.length-1]&&(n--,"="===o[o.length-2]&&n--);const l=new ArrayBuffer(n),_=new Uint8Array(l);for(r=0;r<e;r+=4)s=H[o.charCodeAt(r)],c=H[o.charCodeAt(r+1)],u=H[o.charCodeAt(r+2)],h=H[o.charCodeAt(r+3)],_[i++]=s<<2|c>>4,_[i++]=(15&c)<<4|u>>2,_[i++]=(3&u)<<6|63&h;return l})(o);return re(e,n)}return{base64:!0,data:o}},re=(o,n)=>"blob"===n&&o instanceof ArrayBuffer?new Blob([o]):o,ie=(o,n)=>{if("string"!=typeof o)return{type:"message",data:re(o,n)};const e=o.charAt(0);return"b"===e?{type:"message",data:Ho(o.substring(1),n)}:it[e]?o.length>1?{type:it[e],data:o.substring(1)}:{type:it[e]}:jo},se=String.fromCharCode(30);function b(o){if(o)return function Qo(o){for(var n in b.prototype)o[n]=b.prototype[n];return o}(o)}b.prototype.on=b.prototype.addEventListener=function(o,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(n),this},b.prototype.once=function(o,n){function e(){this.off(o,e),n.apply(this,arguments)}return e.fn=n,this.on(o,e),this},b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=b.prototype.removeEventListener=function(o,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks["$"+o];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+o],this;for(var r,i=0;i<e.length;i++)if((r=e[i])===n||r.fn===n){e.splice(i,1);break}return 0===e.length&&delete this._callbacks["$"+o],this},b.prototype.emitReserved=b.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),e=this._callbacks["$"+o],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(e){r=0;for(var i=(e=e.slice(0)).length;r<i;++r)e[r].apply(this,n)}return this},b.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]},b.prototype.hasListeners=function(o){return!!this.listeners(o).length};const L="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ae(o,...n){return n.reduce((e,r)=>(o.hasOwnProperty(r)&&(e[r]=o[r]),e),{})}const Ko=setTimeout,Go=clearTimeout;function st(o,n){n.useNativeTimers?(o.setTimeoutFn=Ko.bind(L),o.clearTimeoutFn=Go.bind(L)):(o.setTimeoutFn=setTimeout.bind(L),o.clearTimeoutFn=clearTimeout.bind(L))}function Wo(o){return"string"==typeof o?function Xo(o){let n=0,e=0;for(let r=0,i=o.length;r<i;r++)n=o.charCodeAt(r),n<128?e+=1:n<2048?e+=2:n<55296||n>=57344?e+=3:(r++,e+=4);return e}(o):Math.ceil(1.33*(o.byteLength||o.size))}class tn extends Error{constructor(n,e,r){super(n),this.description=e,this.context=r,this.type="TransportError"}}class de extends b{constructor(n){super(),this.writable=!1,st(this,n),this.opts=n,this.query=n.query,this.readyState="",this.socket=n.socket}onError(n,e,r){return super.emitReserved("error",new tn(n,e,r)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(n){"open"===this.readyState&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const e=ie(n,this.socket.binaryType);this.onPacket(e)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}}const le="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ue={};let pe,he=0,N=0;function fe(o){let n="";do{n=le[o%64]+n,o=Math.floor(o/64)}while(o>0);return n}function ge(){const o=fe(+new Date);return o!==pe?(he=0,pe=o):o+"."+fe(he++)}for(;N<64;N++)ue[le[N]]=N;function me(o){let n="";for(let e in o)o.hasOwnProperty(e)&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(o[e]));return n}let _e=!1;try{_e="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){}const on=_e;function be(o){const n=o.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!n||on))return new XMLHttpRequest}catch(e){}if(!n)try{return new(L[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function nn(){}const rn=null!=new be({xdomain:!1}).responseType;let at=(()=>{class o extends b{constructor(e,r){super(),st(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=!1!==r.async,this.data=void 0!==r.data?r.data:null,this.create()}create(){const e=ae(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const r=this.xhr=new be(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(i){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof r.status?r.status:0)},0))},r.send(this.data)}catch(i){return void this.setTimeoutFn(()=>{this.onError(i)},0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(null!=this.xhr){if(this.xhr.onreadystatechange=nn,e)try{this.xhr.abort()}catch(r){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return o.requestsCount=0,o.requests={},o})();function ye(){for(let o in at.requests)at.requests.hasOwnProperty(o)&&at.requests[o].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",ye):"function"==typeof addEventListener&&addEventListener("onpagehide"in L?"pagehide":"unload",ye,!1));const cn="function"==typeof Promise&&"function"==typeof Promise.resolve?n=>Promise.resolve().then(n):(n,e)=>e(n,0),dt=L.WebSocket||L.MozWebSocket,Pe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),ln={websocket:class dn extends de{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),e=this.opts.protocols,r=Pe?{}:ae(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Pe?new dt(n,e,r):e?new dt(n,e):new dt(n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let e=0;e<n.length;e++){const i=e===n.length-1;ne(n[e],this.supportsBinary,s=>{try{this.ws.send(s)}catch(u){}i&&cn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let n=this.query||{};const e=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(n[this.opts.timestampParam]=ge()),this.supportsBinary||(n.b64=1);const i=me(n);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!!dt}},polling:class sn extends de{constructor(n){if(super(n),this.polling=!1,"undefined"!=typeof location){const r="https:"===location.protocol;let i=location.port;i||(i=r?"443":"80"),this.xd="undefined"!=typeof location&&n.hostname!==location.hostname||i!==n.port,this.xs=n.secure!==r}this.supportsBinary=rn&&!(n&&n.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const e=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){((o,n)=>{const e=o.split(se),r=[];for(let i=0;i<e.length;i++){const s=ie(e[i],n);if(r.push(s),"error"===s.type)break}return r})(n,this.socket.binaryType).forEach(r=>{if("opening"===this.readyState&&"open"===r.type&&this.onOpen(),"close"===r.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};"open"===this.readyState?n():this.once("open",n)}write(n){this.writable=!1,((o,n)=>{const e=o.length,r=new Array(e);let i=0;o.forEach((s,c)=>{ne(s,!1,u=>{r[c]=u,++i===e&&n(r.join(se))})})})(n,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let n=this.query||{};const e=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(n[this.opts.timestampParam]=ge()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const i=me(n);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}request(n={}){return Object.assign(n,{xd:this.xd,xs:this.xs},this.opts),new at(this.uri(),n)}doWrite(n,e){const r=this.request({method:"POST",data:n});r.on("success",e),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=n}}},un=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function qt(o){const n=o,e=o.indexOf("["),r=o.indexOf("]");-1!=e&&-1!=r&&(o=o.substring(0,e)+o.substring(e,r).replace(/:/g,";")+o.substring(r,o.length));let i=un.exec(o||""),s={},c=14;for(;c--;)s[hn[c]]=i[c]||"";return-1!=e&&-1!=r&&(s.source=n,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function pn(o,n){const r=n.replace(/\/{2,9}/g,"/").split("/");return("/"==n.substr(0,1)||0===n.length)&&r.splice(0,1),"/"==n.substr(n.length-1,1)&&r.splice(r.length-1,1),r}(0,s.path),s.queryKey=function fn(o,n){const e={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(e[i]=s)}),e}(0,s.query),s}let ve=(()=>{class o extends b{constructor(e,r={}){super(),e&&"object"==typeof e&&(r=e,e=null),e?(e=qt(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=qt(r.host).host),st(this,r),this.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=r.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function en(o){let n={},e=o.split("&");for(let r=0,i=e.length;r<i;r++){let s=e[r].split("=");n[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=4,r.transport=e,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ln[e](i)}open(){let e;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),i=!1;o.priorWebsocketSuccess=!1;const s=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",T=>{if(!i)if("pong"===T.type&&"probe"===T.data){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;o.priorWebsocketSuccess="websocket"===r.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(E(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const U=new Error("probe error");U.transport=r.name,this.emitReserved("upgradeError",U)}}))};function c(){i||(i=!0,E(),r.close(),r=null)}const u=T=>{const U=new Error("probe error: "+T);U.transport=r.name,c(),this.emitReserved("upgradeError",U)};function h(){u("transport closed")}function l(){u("socket closed")}function _(T){r&&T.name!==r.name&&c()}const E=()=>{r.removeListener("open",s),r.removeListener("error",u),r.removeListener("close",h),this.off("close",l),this.off("upgrading",_)};r.once("open",s),r.once("error",u),r.once("close",h),this.once("close",l),this.once("upgrading",_),r.open()}onOpen(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(r+=Wo(s)),i>0&&r>this.maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}write(e,r,i){return this.sendPacket("message",e,r,i),this}send(e,r,i){return this.sendPacket("message",e,r,i),this}sendPacket(e,r,i,s){if("function"==typeof r&&(s=r,r=void 0),"function"==typeof i&&(s=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const c={type:e,data:r,options:i};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){o.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let i=0;const s=e.length;for(;i<s;i++)~this.transports.indexOf(e[i])&&r.push(e[i]);return r}}return o.protocol=4,o})();const mn="function"==typeof ArrayBuffer,Ce=Object.prototype.toString,bn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ce.call(Blob),yn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ce.call(File);function Bt(o){return mn&&(o instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer)(o))||bn&&o instanceof Blob||yn&&o instanceof File}function lt(o,n){if(!o||"object"!=typeof o)return!1;if(Array.isArray(o)){for(let e=0,r=o.length;e<r;e++)if(lt(o[e]))return!0;return!1}if(Bt(o))return!0;if(o.toJSON&&"function"==typeof o.toJSON&&1===arguments.length)return lt(o.toJSON(),!0);for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)&&lt(o[e]))return!0;return!1}function Pn(o){const n=[],r=o;return r.data=jt(o.data,n),r.attachments=n.length,{packet:r,buffers:n}}function jt(o,n){if(!o)return o;if(Bt(o)){const e={_placeholder:!0,num:n.length};return n.push(o),e}if(Array.isArray(o)){const e=new Array(o.length);for(let r=0;r<o.length;r++)e[r]=jt(o[r],n);return e}if("object"==typeof o&&!(o instanceof Date)){const e={};for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=jt(o[r],n));return e}return o}function vn(o,n){return o.data=It(o.data,n),o.attachments=void 0,o}function It(o,n){if(!o)return o;if(o&&!0===o._placeholder){if("number"==typeof o.num&&o.num>=0&&o.num<n.length)return n[o.num];throw new Error("illegal attachments")}if(Array.isArray(o))for(let e=0;e<o.length;e++)o[e]=It(o[e],n);else if("object"==typeof o)for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&(o[e]=It(o[e],n));return o}const Cn=5;var g=(()=>{return(o=g||(g={}))[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK",g;var o})();class xn{constructor(n){this.replacer=n}encode(n){return n.type!==g.EVENT&&n.type!==g.ACK||!lt(n)?[this.encodeAsString(n)]:(n.type=n.type===g.EVENT?g.BINARY_EVENT:g.BINARY_ACK,this.encodeAsBinary(n))}encodeAsString(n){let e=""+n.type;return(n.type===g.BINARY_EVENT||n.type===g.BINARY_ACK)&&(e+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(e+=n.nsp+","),null!=n.id&&(e+=n.id),null!=n.data&&(e+=JSON.stringify(n.data,this.replacer)),e}encodeAsBinary(n){const e=Pn(n),r=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(r),i}}class Rt extends b{constructor(n){super(),this.reviver=n}add(n){let e;if("string"==typeof n){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(n),e.type===g.BINARY_EVENT||e.type===g.BINARY_ACK?(this.reconstructor=new An(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!Bt(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(n),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(n){let e=0;const r={type:Number(n.charAt(0))};if(void 0===g[r.type])throw new Error("unknown packet type "+r.type);if(r.type===g.BINARY_EVENT||r.type===g.BINARY_ACK){const s=e+1;for(;"-"!==n.charAt(++e)&&e!=n.length;);const c=n.substring(s,e);if(c!=Number(c)||"-"!==n.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(c)}if("/"===n.charAt(e+1)){const s=e+1;for(;++e&&","!==n.charAt(e)&&e!==n.length;);r.nsp=n.substring(s,e)}else r.nsp="/";const i=n.charAt(e+1);if(""!==i&&Number(i)==i){const s=e+1;for(;++e;){const c=n.charAt(e);if(null==c||Number(c)!=c){--e;break}if(e===n.length)break}r.id=Number(n.substring(s,e+1))}if(n.charAt(++e)){const s=this.tryParse(n.substr(e));if(!Rt.isPayloadValid(r.type,s))throw new Error("invalid payload");r.data=s}return r}tryParse(n){try{return JSON.parse(n,this.reviver)}catch(e){return!1}}static isPayloadValid(n,e){switch(n){case g.CONNECT:return"object"==typeof e;case g.DISCONNECT:return void 0===e;case g.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case g.EVENT:case g.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case g.ACK:case g.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class An{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const e=vn(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Z(o,n,e){return o.on(n,e),function(){o.off(n,e)}}const Tn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xe extends b{constructor(n,e,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[Z(n,"open",this.onopen.bind(this)),Z(n,"packet",this.onpacket.bind(this)),Z(n,"error",this.onerror.bind(this)),Z(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...e){if(Tn.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');e.unshift(n);const r={type:g.EVENT,data:e,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const c=this.ids++,u=e.pop();this._registerAckCallback(c,u),r.id=c}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(n,e){const r=this.flags.timeout;if(void 0===r)return void(this.acks[n]=e);const i=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===n&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},r);this.acks[n]=(...s)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...s])}}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){"function"==typeof this.auth?this.auth(n=>{this.packet({type:g.CONNECT,data:n})}):this.packet({type:g.CONNECT,data:this.auth})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,e)}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case g.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case g.EVENT:case g.BINARY_EVENT:this.onevent(n);break;case g.ACK:case g.BINARY_ACK:this.onack(n);break;case g.DISCONNECT:this.ondisconnect();break;case g.CONNECT_ERROR:this.destroy();const r=new Error(n.data.message);r.data=n.data.data,this.emitReserved("connect_error",r)}}onevent(n){const e=n.data||[];null!=n.id&&e.push(this.ack(n.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,n)}super.emit.apply(this,n)}ack(n){const e=this;let r=!1;return function(...i){r||(r=!0,e.packet({type:g.ACK,id:n,data:i}))}}onack(n){const e=this.acks[n.id];"function"==typeof e&&(e.apply(this,n.data),delete this.acks[n.id])}onconnect(n){this.id=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:g.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(n===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(n===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const r of e)r.apply(this,n.data)}}}function Y(o){this.ms=(o=o||{}).min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}Y.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),e=Math.floor(n*this.jitter*o);o=0==(1&Math.floor(10*n))?o-e:o+e}return 0|Math.min(o,this.max)},Y.prototype.reset=function(){this.attempts=0},Y.prototype.setMin=function(o){this.ms=o},Y.prototype.setMax=function(o){this.max=o},Y.prototype.setJitter=function(o){this.jitter=o};class Ut extends b{constructor(n,e){var r;super(),this.nsps={},this.subs=[],n&&"object"==typeof n&&(e=n,n=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,st(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=e.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Y({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=n;const i=e.parser||A;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return void 0===n?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var e;return void 0===n?this._reconnectionDelay:(this._reconnectionDelay=n,null===(e=this.backoff)||void 0===e||e.setMin(n),this)}randomizationFactor(n){var e;return void 0===n?this._randomizationFactor:(this._randomizationFactor=n,null===(e=this.backoff)||void 0===e||e.setJitter(n),this)}reconnectionDelayMax(n){var e;return void 0===n?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,null===(e=this.backoff)||void 0===e||e.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new ve(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Z(e,"open",function(){r.onopen(),n&&n()}),s=Z(e,"error",c=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",c),n?n(c):r.maybeReconnectOnOpen()});if(!1!==this._timeout){const c=this._timeout;0===c&&i();const u=this.setTimeoutFn(()=>{i(),e.close(),e.emit("error",new Error("timeout"))},c);this.opts.autoUnref&&u.unref(),this.subs.push(function(){clearTimeout(u)})}return this.subs.push(i),this.subs.push(s),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(Z(n,"ping",this.onping.bind(this)),Z(n,"data",this.ondata.bind(this)),Z(n,"error",this.onerror.bind(this)),Z(n,"close",this.onclose.bind(this)),Z(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(e){this.onclose("parse error")}}ondecoded(n){this.emitReserved("packet",n)}onerror(n){this.emitReserved("error",n)}socket(n,e){let r=this.nsps[n];return r||(r=new xe(this,n,e),this.nsps[n]=r),r}_destroy(n){const e=Object.keys(this.nsps);for(const r of e)if(this.nsps[r].active)return;this._close()}_packet(n){const e=this.encoder.encode(n);for(let r=0;r<e.length;r++)this.engine.write(e[r],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(i=>{i?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",i)):n.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const D={};function ut(o,n){"object"==typeof o&&(n=o,o=void 0);const e=function gn(o,n="",e){let r=o;e=e||"undefined"!=typeof location&&location,null==o&&(o=e.protocol+"//"+e.host),"string"==typeof o&&("/"===o.charAt(0)&&(o="/"===o.charAt(1)?e.protocol+o:e.host+o),/^(https?|wss?):\/\//.test(o)||(o=void 0!==e?e.protocol+"//"+o:"https://"+o),r=qt(o)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+n,r.href=r.protocol+"://"+s+(e&&e.port===r.port?"":":"+r.port),r}(o,(n=n||{}).path||"/socket.io"),r=e.source,i=e.id;let h;return n.forceNew||n["force new connection"]||!1===n.multiplex||D[i]&&e.path in D[i].nsps?h=new Ut(r,n):(D[i]||(D[i]=new Ut(r,n)),h=D[i]),e.query&&!n.query&&(n.query=e.queryKey),h.socket(e.path,n)}Object.assign(ut,{Manager:Ut,Socket:xe,io:ut,connect:ut});let Ae=(()=>{class o{constructor(){this.socket=void 0,this.socket=ut(rt.N.url,{timeout:3e3,extraHeaders:{"x-token":localStorage.getItem("token")||""}})}emit(e,r){this.socket&&this.socket.emit(e,r)}getSocket(){return this.socket}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var wn=d(97569),Zn=d(34594),Sn=d(27544),Ft=d(92181);const On=["btnLogout"],En=function(){return["producto"]};function Mn(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().crearProducto()}),t.TgZ(2,"mat-icon"),t._uU(3,"add_shopping_cart"),t.qZA(),t.qZA(),t.BQk()}2&o&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,En)))}function kn(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const s=t.CHM(e).ngIf;return t.oxw(2).eliminarProductosSeleccionados(s)}),t.ALo(1,"async"),t.TgZ(2,"mat-icon"),t._uU(3,"delete_sweep"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("matBadge",t.lcZ(1,1,e.estadoProductos$).productosSeleccionados.length)}}function Ln(o,n){if(1&o&&(t.YNc(0,kn,4,3,"button",18),t.ALo(1,"async")),2&o){const e=t.oxw();t.Q6J("ngIf",t.lcZ(1,1,e.estadoProductos$).productosSeleccionados)}}function Nn(o,n){1&o&&(t.TgZ(0,"button",11),t.TgZ(1,"span",20),t._uU(2," Error de conexi\xf3n ... "),t.qZA(),t.qZA())}const qn=function(o){return{"socket-desconectado":o}};let Bn=(()=>{class o{constructor(e,r){this.store=e,this.dialogoService=r,this.estadoSocket=!1,this.estadoProductos$=new P.y,this.misProductos$=new P.y,this.estadoAuth$=new P.y,this.estadoDialogo$=new P.y,this.dialogProceserSubscription=void 0,this.usuarioLogueadoSubscription=void 0}ngOnInit(){this.estadoProductos$=this.store.select("productos"),this.misProductos$=this.store.select(Me),this.estadoAuth$=this.store.select("auth"),this.estadoDialogo$=this.store.select("dialogo"),this.usuarioLogueadoSubscription=this.store.select(wn.n).subscribe(e=>{e||this.desconectarWallet()})}eliminarProductosSeleccionados(e){null!=this.dialogProceserSubscription&&this.dialogProceserSubscription.unsubscribe(),this.store.dispatch((0,q.ph)({tipo:B.ELIMINAR,producto:null,id:e,data:{redirigir:!1,url:null,variosProductos:!0}})),this.dialogProceserSubscription=this.dialogoService.getDialogo().componentInstance.onProceder.subscribe(i=>{!0===i.proceder&&this.store.dispatch(Ht({id:e,gasPrice:i.gasPrice})),!1===i.proceder&&this.limpiarError()})}crearProducto(){this.store.dispatch(yt())}limpiarError(){this.store.dispatch(z())}desconectarWallet(){this.store.dispatch((0,nt.YD)())}conectarWallet(){this.store.dispatch((0,nt.T4)())}keyEvent(e){this.store.dispatch(Q())}ngOnDestroy(){null!=this.dialogProceserSubscription&&this.dialogProceserSubscription.unsubscribe(),null!=this.usuarioLogueadoSubscription&&this.usuarioLogueadoSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.yh),t.Y36(et.w))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header"]],viewQuery:function(e,r){if(1&e&&t.Gf(On,5),2&e){let i;t.iGM(i=t.CRH())&&(r.btnLogout=i.first)}},hostBindings:function(e,r){1&e&&t.NdJ("keydown.escape",function(s){return r.keyEvent(s)},!1,t.Jf7)},inputs:{estadoSocket:"estadoSocket"},decls:40,vars:28,consts:[["color","primary",1,"toolbar-static"],[4,"ngIf","ngIfElse"],["mostrarBtnBorrarSeleccionados",""],[1,"espacio"],[1,"cuenta","color-btn-accion",3,"matMenuTriggerFor"],[1,"img-cuenta"],[3,"cuenta","size"],[1,"info-cuenta",3,"ngClass"],[1,"align-icon"],["xPosition","before"],["beforeMenu","matMenu"],["mat-menu-item","","disabled","true",1,"submenu"],[1,"submenu-titulo"],[1,"submenu-dato"],["mat-menu-item","","class","submenu","disabled","true",4,"ngIf"],[3,"inset"],["mat-menu-item","",1,"submenu-cerrar",3,"click"],["mat-raised-button","","matTooltip","Nuevo producto",1,"color-btn-accion",3,"routerLink","click"],["mat-raised-button","","matTooltip","Borrar productos seleccionados (Experimental)","matBadgeColor","warn","class","color-btn-accion",3,"matBadge","click",4,"ngIf"],["mat-raised-button","","matTooltip","Borrar productos seleccionados (Experimental)","matBadgeColor","warn",1,"color-btn-accion",3,"matBadge","click"],[1,"submenu-titulo","submenu-error"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-toolbar",0),t.YNc(1,Mn,4,2,"ng-container",1),t.ALo(2,"async"),t.YNc(3,Ln,2,3,"ng-template",null,2,t.W1O),t._UZ(5,"span",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t._UZ(8,"app-usuario-icono",6),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"span",7),t._uU(11),t.ALo(12,"idformat"),t.ALo(13,"async"),t.qZA(),t.TgZ(14,"mat-icon",8),t._uU(15,"keyboard_arrow_down"),t.qZA(),t.qZA(),t.TgZ(16,"mat-menu",9,10),t.TgZ(18,"button",11),t.TgZ(19,"span",12),t._uU(20," Total productos: "),t.qZA(),t.TgZ(21,"span",13),t._uU(22),t.ALo(23,"async"),t.qZA(),t.qZA(),t.TgZ(24,"button",11),t.TgZ(25,"span",12),t._uU(26," Mis productos: "),t.qZA(),t.TgZ(27,"span",13),t._uU(28),t.ALo(29,"async"),t.qZA(),t.qZA(),t.TgZ(30,"button",11),t.TgZ(31,"span",12),t._uU(32," Mi balance: "),t.qZA(),t.TgZ(33,"span",13),t._uU(34),t.ALo(35,"async"),t.qZA(),t.qZA(),t.YNc(36,Nn,3,0,"button",14),t._UZ(37,"mat-divider",15),t.TgZ(38,"button",16),t.NdJ("click",function(){return r.desconectarWallet()}),t._uU(39,"Cerrar sesi\xf3n"),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(4),s=t.MAs(17);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,12,r.estadoProductos$).productosSeleccionados.length<=0)("ngIfElse",i),t.xp6(5),t.Q6J("matMenuTriggerFor",s),t.xp6(2),t.Q6J("cuenta",t.lcZ(9,14,r.estadoAuth$).cuenta)("size",24),t.xp6(2),t.Q6J("ngClass",t.VKq(26,qn,!r.estadoSocket)),t.xp6(1),t.hij(" ",t.lcZ(12,16,t.lcZ(13,18,r.estadoAuth$).cuenta)," "),t.xp6(11),t.hij(" ",t.lcZ(23,20,r.estadoProductos$).productos.length," "),t.xp6(6),t.hij(" ",t.lcZ(29,22,r.misProductos$)," "),t.xp6(6),t.hij(" ",t.lcZ(35,24,r.estadoDialogo$).balance," ETH "),t.xp6(2),t.Q6J("ngIf",!r.estadoSocket),t.xp6(1),t.Q6J("inset",!1)}},directives:[Zn.Ye,f.O5,k.zs,C.yS,ot.gM,M.Hw,k.lW,Sn.k,Ft.p6,Et,f.mk,Ft.VK,Ft.OP,Mt.d],pipes:[f.Ov,$.e],styles:[".toolbar-static[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100}.cuenta[_ngcontent-%COMP%]{border-radius:5px;border:1px solid white;display:table;cursor:pointer;padding:5px 10px}.img-cuenta[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;border-radius:99999px}.info-cuenta[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;padding-left:8px;padding-right:8px;font-size:16px}.socket-desconectado[_ngcontent-%COMP%]{color:red}.submenu[_ngcontent-%COMP%]{width:250px;line-height:0;height:30px}.submenu-error[_ngcontent-%COMP%]{color:#ff000080}.submenu-titulo[_ngcontent-%COMP%]{display:inline-block}.submenu-dato[_ngcontent-%COMP%]{float:right}.submenu-cerrar[_ngcontent-%COMP%]{text-align:right;line-height:5px;height:30px;margin-top:8px}"]}),o})();const jn=[{path:"",component:(()=>{class o{constructor(e,r,i,s){this.store=e,this.router=r,this.socketService=i,this.snackBar=s,this.routerEventsSubscription=void 0,this.estadoSocket=!1,this.routerEventsSubscription=this.router.events.subscribe(c=>{c instanceof C.OD&&this.store.dispatch((0,nt.vJ)())}),this.accountsChanged=c=>{this.cambioEnWallet()},this.chainChanged=c=>{this.cambioEnWallet()},this.disconnect=c=>{},this.productoCreado=c=>{this.store.dispatch(W({producto:c.data,balance:c.balance})),this.notificarUsuarios(c.tx,"Creaci\xf3n")},this.productoActualizado=c=>{this.store.dispatch(X({producto:c.data,balance:c.balance})),this.notificarUsuarios(c.tx,"Actualizaci\xf3n")},this.productoEliminado=c=>{this.store.dispatch(G({id:c.data,balance:c.balance})),this.notificarUsuarios(c.tx,"Eliminaci\xf3n")},this.productosEliminados=c=>{this.store.dispatch(K({id:c.data,balance:c.balance})),this.notificarUsuarios(c.tx,"Eliminaciones")},this.socketConectado=()=>{this.estadoSocket=!0,this.store.dispatch(J())},this.socketDesconectado=()=>{this.estadoSocket=!1}}cambioEnWallet(){this.store.dispatch((0,nt.YD)())}ngOnInit(){window.ethereum&&(window.ethereum.on("accountsChanged",this.accountsChanged,!0),window.ethereum.on("chainChanged",this.chainChanged),window.ethereum.on("disconnect",this.disconnect,!0)),this.socketService.getSocket()&&(this.socketService.getSocket().on("connect",this.socketConectado),this.socketService.getSocket().on("disconnect",this.socketDesconectado),this.socketService.getSocket().on("producto-creado",this.productoCreado),this.socketService.getSocket().on("producto-actualizado",this.productoActualizado),this.socketService.getSocket().on("producto-eliminado",this.productoEliminado),this.socketService.getSocket().on("productos-eliminados",this.productosEliminados))}notificarUsuarios(e,r){this.snackBar.dismiss(),this.snackBar.openFromComponent(Bo,{horizontalPosition:"center",verticalPosition:"top",data:{tx:e,tipoAccion:r}})}ngOnDestroy(){!window.ethereum||(window.ethereum.removeListener("accountsChanged",this.accountsChanged,!0),window.ethereum.removeListener("chainChanged",this.chainChanged,!0),window.ethereum.removeListener("disconnect",this.disconnect,!0),window.location.reload(),this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.yh),t.Y36(C.F0),t.Y36(Ae),t.Y36(Lt.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[3,"estadoSocket"]],template:function(e,r){1&e&&(t._UZ(0,"app-header",0),t._UZ(1,"router-outlet")),2&e&&t.Q6J("estadoSocket",r.estadoSocket)},directives:[Bn,C.lC],styles:[""]}),o})(),children:[{path:"productos",pathMatch:"full",component:vo},{path:"producto",pathMatch:"full",component:ko}]},{path:"**",component:Ao}];let In=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.Bz.forChild(jn)],C.Bz]}),o})();var Rn=d(44466),Un=d(51754);const Te={productos:[],productosSeleccionados:[],productoSeleccionado:null,productosBusqueda:[],buscando:!1,loading:!1,loaded:!1,error:null};let Yt=JSON.parse(localStorage.getItem("productos")||"{}");0===Object.keys(Yt).length&&(Yt=null);const Fn=(0,a.Lq)(Yt||Te,(0,a.on)(J,(o,n)=>Object.assign(Object.assign({},Te),{loading:!0,error:null})),(0,a.on)(gt,(o,n)=>Object.assign(Object.assign({},o),{productos:n.productos,loading:!1,loaded:!0})),(0,a.on)(mt,(o,{error:n})=>Object.assign(Object.assign({},o),{loading:!1,loaded:!1,error:n})),(0,a.on)(_t,(o,{id:n})=>Object.assign(Object.assign({},o),{productoSeleccionado:null,productosSeleccionados:o.productosSeleccionados.includes(n)?o.productosSeleccionados.filter(e=>e!==n):[...o.productosSeleccionados,n]})),(0,a.on)($t,(o,{id:n})=>Object.assign(Object.assign({},o),{productoSeleccionado:null,productosSeleccionados:o.productosSeleccionados.filter(e=>e!==n)})),(0,a.on)(Q,o=>Object.assign(Object.assign({},o),{productosSeleccionados:[]})),(0,a.on)(bt,(o,n)=>Object.assign(Object.assign({},o),{loading:!0,error:null})),(0,a.on)(G,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[],productos:o.productos.filter(e=>e.id!==n.id),productosSeleccionados:[],loading:!1,error:null})),(0,a.on)(K,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[],productos:o.productos.filter(e=>!n.id.includes(e.id)),productosSeleccionados:[],loading:!1,error:null})),(0,a.on)(V,(o,n)=>Object.assign(Object.assign({},o),{loading:!1,error:n.error})),(0,a.on)(yt,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[],productoSeleccionado:null,error:null})),(0,a.on)(Pt,(o,n)=>Object.assign(Object.assign({},o),{loading:!0})),(0,a.on)(W,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[],loading:!1,productos:[n.producto,...o.productos]})),(0,a.on)(vt,(o,n)=>Object.assign(Object.assign({},o),{loading:!1,error:n.error})),(0,a.on)(Ct,(o,n)=>Object.assign(Object.assign({},o),{loading:!0,productoSeleccionado:null,productosSeleccionados:[],error:null})),(0,a.on)(xt,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[],loading:!1,productoSeleccionado:n.producto,productosSeleccionados:[],error:null})),(0,a.on)(At,(o,n)=>Object.assign(Object.assign({},o),{loading:!1,productoSeleccionado:null,productosSeleccionados:[],error:n.error})),(0,a.on)(Tt,(o,n)=>Object.assign(Object.assign({},o),{loading:!0,error:null})),(0,a.on)(X,(o,n)=>Object.assign(Object.assign({},o),{loading:!1,productos:o.productos.map(e=>e.id===n.producto.id?n.producto:e),productoSeleccionado:null})),(0,a.on)(wt,(o,n)=>Object.assign(Object.assign({},o),{loading:!1,error:n.error})),(0,a.on)(Zt,(o,n)=>Object.assign(Object.assign({},o),{buscando:!0,productosBusqueda:o.productos.filter(e=>!!e.nombre.toLowerCase().includes(n.buscar.toLowerCase())&&e)})),(0,a.on)(St,(o,n)=>Object.assign(Object.assign({},o),{buscando:!1,productosBusqueda:[]})),(0,a.on)(z,(o,n)=>Object.assign(Object.assign({},o),{error:null})),(0,a.on)(Ot,(o,n)=>Object.assign(Object.assign({},o),{error:n.error})));var Yn=d(50127),m=d(36642),I=d(39646),R=d(95577),O=d(54004),x=d(70262),ht=d(18505),we=d(11365),pt=d(40520),ft=d(62843),zn=d(18537),Ze=d(15184);let $n=(()=>{class o{constructor(e){this.httpClient=e,this.url=rt.N.url,this.context=new pt.qT,this.context.set(Ze.$,!0)}listarProductos(){return this.httpClient.get(`${this.url}/productos`,{context:this.context}).pipe((0,x.K)(this.handleError))}eliminarProducto(e,r,i){return this.httpClient.delete(`${this.url}/productos/${e}`,{context:this.context,body:{gasLimit:r,gasPrice:i}}).pipe((0,x.K)(this.handleError))}eliminarVariosProductos(e,r){return this.httpClient.post(`${this.url}/productos/eliminar`,{id:e,gasPrice:r},{context:this.context}).pipe((0,zn.g)(1e3),(0,x.K)(this.handleError))}crearProducto(e,r,i,s){const c=new FormData,u=Object.keys(e),h=Object.values(e);for(const l in u)c.append(u[l],h[l]);return c.append("imagen",r),c.append("gasLimit",i),c.append("gasPrice",s),this.httpClient.post(`${this.url}/productos`,c,{context:this.context}).pipe((0,x.K)(this.handleError))}editarProducto(e){return this.httpClient.get(`${this.url}/productos/${e}`,{context:this.context}).pipe((0,x.K)(this.handleError))}actualizarProducto(e,r,i,s,c){null==i&&(i="");const u=new FormData,h=Object.keys(e),l=Object.values(e);for(const _ in h)u.append(h[_],l[_]);return u.append("imagen",r),u.append("gasLimit",s),u.append("gasPrice",c),this.httpClient.put(`${this.url}/productos/${i}`,u,{context:this.context}).pipe((0,x.K)(this.handleError))}handleError(e){let r="Ocurrio un error desconocido, vuelva a intentarlo en unos minutos.";return e.message.includes("404")?(0,ft._)({success:!1,msj:"Servicio esta temporalmente deshabilitado, vuelva a intentarlo en unos minutos."}):(e.hasOwnProperty("error")&&e.error.hasOwnProperty("msj")&&(r=e.error.msj),(0,ft._)({success:!1,msj:r}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(pt.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Hn=(()=>{class o{constructor(e,r,i,s,c){var u=this;this.actions$=e,this.productosService=r,this.router=i,this.store=s,this.socketService=c,this.cargarProductos$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.listarProductos),(0,R.z)(()=>this.productosService.listarProductos().pipe((0,O.U)(h=>gt({productos:h.productos||[],balance:h.balance||0})),(0,x.K)(h=>(0,I.of)(mt({error:h.msj}))))))),this.eliminarProducto$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.eliminarProducto),(0,R.z)(h=>this.productosService.eliminarProducto(h.id,h.gasLimit,h.gasPrice).pipe((0,O.U)(l=>(this.socketService.emit("producto-eliminado-cliente",{data:h.id,balance:l.balance,tx:l.tx}),G({id:h.id,balance:l.balance,tx:l.tx}))),(0,x.K)(l=>(0,I.of)(V({error:l.msj}))))))),this.eliminarVariosProducto$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.eliminarVariosProductos),(0,R.z)(h=>this.productosService.eliminarVariosProductos(h.id,h.gasPrice).pipe((0,O.U)(l=>(this.socketService.emit("productos-eliminados-cliente",{data:h.id,balance:l.balance,tx:l.tx}),K({id:h.id,balance:l.balance,tx:l.tx}))),(0,x.K)(l=>(0,I.of)(V({error:l.msj}))))))),this.crearProducto$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.guardarProducto),(0,R.z)(h=>this.productosService.crearProducto(h.producto,h.imagen,h.gasLimit,h.gasPrice).pipe((0,O.U)(l=>(this.socketService.emit("producto-creado-cliente",{data:l.producto,balance:l.balance,tx:l.tx}),W({producto:l.producto,balance:l.balance,tx:l.tx}))),(0,x.K)(l=>(0,I.of)(vt({error:l.msj}))))))),this.editarProducto$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.editarProducto),(0,R.z)(h=>this.productosService.editarProducto(h.id).pipe((0,O.U)(l=>xt({producto:l.producto||null})),(0,x.K)(l=>(0,I.of)(At({error:l.msj}))))))),this.redirectProductoEditar$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.editarProductoSuccess),(0,ht.b)(function(){var h=(0,ee.Z)(function*(l){return yield u.router.navigate(["wallet/producto"],{replaceUrl:!0})});return function(l){return h.apply(this,arguments)}}())),{dispatch:!1}),this.actualizarProducto$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.actualizarProducto),(0,R.z)(h=>this.productosService.actualizarProducto(h.producto,h.imagen,h.id,h.gasLimit,h.gasPrice).pipe((0,O.U)(l=>(this.socketService.emit("producto-actualizado-cliente",{data:l.producto,balance:l.balance,tx:l.tx}),X({producto:l.producto,balance:l.balance,tx:l.tx}))),(0,x.K)(l=>(0,I.of)(wt({error:l.msj}))))))),this.saveStateProductos$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.listarProductos,p.Y.listarProductosSuccess,p.Y.listarProductosError,p.Y.eliminarProducto,p.Y.eliminarProductoSuccess,p.Y.eliminarProductoError,p.Y.crearProducto,p.Y.guardarProducto,p.Y.guardarProductoSuccess,p.Y.guardarProductoError,p.Y.editarProducto,p.Y.editarProductoSuccess,p.Y.editarProductoError,p.Y.actualizarProducto,p.Y.actualizarProductoSuccess,p.Y.actualizarProductoError,p.Y.seleccionarProducto,p.Y.deseleccionarProducto,p.Y.deseleccionarTodosLosProductos,p.Y.limpiarError),(0,we.M)(this.store.select("productos")),(0,ht.b)(h=>{localStorage.setItem("productos",JSON.stringify(h[1]||""))})),{dispatch:!1}),this.actualizarBalance$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.listarProductosSuccess,p.Y.eliminarProductoSuccess,p.Y.eliminarVariosProductosSuccess,p.Y.guardarProductoSuccess,p.Y.actualizarProductoSuccess),(0,O.U)(h=>(0,q.pL)({balance:h.balance,procesoExitoso:h.type!==p.Y.listarProductosSuccess,tx:h.tx||""})))),this.enviarErrorAlDialogo$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.actualizarProductoError,p.Y.eliminarProductoError,p.Y.guardarProductoError,p.Y.actualizarProductoError),(0,O.U)(h=>(0,q.Tr)({error:h.error}))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eX),t.LFG($n),t.LFG(C.F0),t.LFG(a.yh),t.LFG(Ae))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var Dn=d(45655);let Jn=(()=>{class o{constructor(e){this.httpClient=e,this.url=rt.N.url,this.context=new pt.qT,this.context.set(Ze.$,!0)}consultarGas(e,r,i){return this.httpClient.post(`${this.url}/productos/consultar-gas`,{tipo:e,producto:r,id:i},{context:this.context}).pipe((0,x.K)(this.handleError))}handleError(e){let r="Ocurrio un error desconocido, vuelva a intentarlo en unos minutos.";return e.message.includes("404")?(0,ft._)({success:!1,msj:"Servicio esta temporalmente deshabilitado, vuelva a intentarlo en unos minutos."}):(e.hasOwnProperty("error")&&e.error.hasOwnProperty("msj")&&(r=e.error.msj),(0,ft._)({success:!1,msj:r}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(pt.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Qn=(()=>{class o{constructor(e,r,i,s){this.actions$=e,this.gasService=r,this.dialogoService=i,this.store=s,this.abrirDialogo$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.abrirDialogo),(0,ht.b)(c=>this.dialogoService.abrirDialogPregunta(c.data)),(0,R.z)(c=>this.gasService.consultarGas(c.tipo,c.producto,c.id).pipe((0,O.U)(u=>(0,q.AG)({gas:u.gas,balance:u.balance})),(0,x.K)(u=>(0,I.of)((0,q.fO)({error:u.msj}))))))),this.saveStateDialogo$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(p.Y.actualizarBalance),(0,we.M)(this.store.select(Dn.Ij)),(0,ht.b)(c=>{localStorage.setItem("dialogo",JSON.stringify(c[1]||""))})),{dispatch:!1})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eX),t.LFG(Jn),t.LFG(et.w),t.LFG(a.yh))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Kn=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,In,Rn.m,Un.q,y.u5,y.UX,a.Aw.forFeature("productos",Fn),a.Aw.forFeature("dialogo",Yn.w),m.sQ.forFeature([Hn,Qn])]]}),o})()},92977:zt=>{var w=function(d){null==d&&(d=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,d.constructor==Array?this.init_by_array(d,d.length):this.init_seed(d)};w.prototype.init_seed=function(d){for(this.mt[0]=d>>>0,this.mti=1;this.mti<this.N;this.mti++)this.mt[this.mti]=(1812433253*((4294901760&(d=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30))>>>16)<<16)+1812433253*(65535&d)+this.mti,this.mt[this.mti]>>>=0},w.prototype.init_by_array=function(d,A){var f,C,P;for(this.init_seed(19650218),f=1,C=0,P=this.N>A?this.N:A;P;P--)this.mt[f]=(this.mt[f]^(1664525*((4294901760&(a=this.mt[f-1]^this.mt[f-1]>>>30))>>>16)<<16)+1664525*(65535&a))+d[C]+C,this.mt[f]>>>=0,C++,++f>=this.N&&(this.mt[0]=this.mt[this.N-1],f=1),C>=A&&(C=0);for(P=this.N-1;P;P--){var a;this.mt[f]=(this.mt[f]^(1566083941*((4294901760&(a=this.mt[f-1]^this.mt[f-1]>>>30))>>>16)<<16)+1566083941*(65535&a))-f,this.mt[f]>>>=0,++f>=this.N&&(this.mt[0]=this.mt[this.N-1],f=1)}this.mt[0]=2147483648},w.prototype.random_int=function(){var d,A=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var f;for(this.mti==this.N+1&&this.init_seed(5489),f=0;f<this.N-this.M;f++)this.mt[f]=this.mt[f+this.M]^(d=this.mt[f]&this.UPPER_MASK|this.mt[f+1]&this.LOWER_MASK)>>>1^A[1&d];for(;f<this.N-1;f++)this.mt[f]=this.mt[f+(this.M-this.N)]^(d=this.mt[f]&this.UPPER_MASK|this.mt[f+1]&this.LOWER_MASK)>>>1^A[1&d];this.mt[this.N-1]=this.mt[this.M-1]^(d=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK)>>>1^A[1&d],this.mti=0}return d=this.mt[this.mti++],d^=d>>>11,d^=d<<7&2636928640,d^=d<<15&4022730752,(d^=d>>>18)>>>0},w.prototype.random_int31=function(){return this.random_int()>>>1},w.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},w.prototype.random=function(){return this.random_int()*(1/4294967296)},w.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},w.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},zt.exports=w}}]);